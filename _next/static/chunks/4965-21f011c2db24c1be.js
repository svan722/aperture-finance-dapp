"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4965],{45020:function(e,t,n){n.d(t,{n:function(){return x},B:function(){return w}});var r=n(79570),i=n(62942),a=n(66886),o=n(70502),s=n(21154),c=n(28388);let u={[c.ApertureSupportedChainId.BASE_MAINNET_CHAIN_ID]:"0x827922686190790b37229fd06084350E74485b72",[c.ApertureSupportedChainId.OPTIMISM_MAINNET_CHAIN_ID]:"0x416b433906b1b72fa758e166e239c43d68dc6f29"};async function d(e,t,n,r,i){return await i.writeContract({chain:i.chain,address:u[e],abi:[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"approve",account:r,args:[t,n]})}async function l(e,t,n,r){return await r.writeContract({chain:r.chain,address:e,abi:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"deposit",account:n,args:[t]})}async function p(e,t,n,r){return await r.writeContract({chain:r.chain,address:e,abi:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],functionName:"withdraw",account:n,args:[t]})}var f=n(16405),g=n(92321),h=n(92467),k=n(92228),m=n(14122),y=n(58694);function v(){let e=(0,k.Z)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 16px;\n"]);return v=function(){return e},e}let b=(0,y.ZP)(m.zxk).withConfig({componentId:"sc-a3e1225f-0"})(v()),S=e=>{let{width:t="100%",minWidth:n,isLoading:i,disabled:a,btnText:o,onClick:s,...c}=e;return(0,r.jsx)(b,{variant:"contained",color:"primary",width:t,minWidth:n,size:"circle",disabled:i||a,onClick:s,...c,children:i?(0,r.jsx)(m.$jN,{}):o})},x=e=>{let{atStake:t,gaugeAddress:n,positionId:u,handleTxSuccess:p,...k}=e,{address:m}=(0,g.m)(),{networkId:y}=(0,i.L)(),{data:v}=(0,h.p)(),{addSnackbar:b}=(0,a.D)(),[x,w]=(0,f.useState)(!1),[C,E]=(0,f.useState)(!1),[P,A]=(0,f.useState)(void 0),[j,T]=(0,f.useState)(!1),[L,I]=(0,f.useState)(t),[M,N]=(0,f.useState)(void 0);(0,f.useEffect)(()=>{E(!1),I(t)},[t]);let F=(0,o.$)(()=>p()),{data:D,error:Y,isError:Z,isLoading:_}=(0,s.B)({hash:P});(0,f.useEffect)(()=>{!_&&D&&"success"===D.status&&(E(!0),w(!1),A(void 0),(0,c.getLogger)().info("StakePosition.Approved",{positionId:u,gaugeAddress:n,approveTxHash:P}))},[D,_]),(0,f.useEffect)(()=>{Z&&(w(!1),A(void 0),(0,c.getLogger)().error("StakePosition.WaitApproveStakePositionFailed: ",{positionId:u,gaugeAddress:n,error:Y}))},[Z]);let q=()=>{w(!0),d(y,n,u,m,v).then(e=>{A(e),b("Your approve request has been sent.","completed",void 0,{hash:e,successMsg:"You have successfully approved to stake position!",failureMsg:"Failed to approve to stake position."})}).catch(e=>{w(!1),(0,c.getLogger)().error("StakePosition.ApproveStakePositionFailed: ",{positionId:u,gaugeAddress:n,error:e.message}),b(e.message.includes("reject")?"User rejected the transaction.":"Failed to approve to stake position.","failed")})},{data:z,error:R,isError:$,isLoading:W}=(0,s.B)({hash:M});(0,f.useEffect)(()=>{!W&&z&&"success"===z.status&&(I(!0),T(!1),N(void 0),(0,c.getLogger)().info("StakePosition.Staked",{positionId:u,gaugeAddress:n,stakeTxHash:M}),F())},[z,W]),(0,f.useEffect)(()=>{$&&(T(!1),N(void 0),(0,c.getLogger)().error("StakePosition.WaitStakePositionFailed: ",{positionId:u,gaugeAddress:n,error:R}))},[$]);let U=()=>{T(!0),l(n,u,m,v).then(e=>{N(e),b("Your stake position request has been sent.","completed",void 0,{hash:e,successMsg:"You have successfully staked position!",failureMsg:"Failed to stake position."})}).catch(e=>{T(!1),(0,c.getLogger)().error("StakePosition.StakePositionFailed: ",{positionId:u,gaugeAddress:n,error:e.message}),b(e.message.includes("reject")?"User rejected the transaction.":"Failed to stake position.","failed")})};return(0,r.jsx)(S,{...C?{isLoading:j,disabled:L,btnText:L?"Position At Stake":"Stake Position",onClick:U}:{isLoading:x,disabled:C,btnText:"Approve to Stake",onClick:q},...k})},w=e=>{let{width:t="100%",minWidth:n,atStake:i,gaugeAddress:u,positionId:d,handleTxSuccess:l,...k}=e,{address:m}=(0,g.m)(),{data:y}=(0,h.p)(),{addSnackbar:v}=(0,a.D)(),[b,x]=(0,f.useState)(!1),[w,C]=(0,f.useState)(!i),[E,P]=(0,f.useState)(void 0),A=(0,o.$)(()=>l()),{data:j,error:T,isError:L,isLoading:I}=(0,s.B)({hash:E});(0,f.useEffect)(()=>{!I&&j&&"success"===j.status&&(C(!0),x(!1),P(void 0),(0,c.getLogger)().info("StakePosition.Unstaked",{positionId:d,gaugeAddress:u,unstakeTxHash:E}),A())},[j,I]),(0,f.useEffect)(()=>{L&&(x(!1),P(void 0),(0,c.getLogger)().error("StakePosition.WaitUnstakePositionFailed: ",{positionId:d,gaugeAddress:u,error:T}))},[L]);let M=()=>{x(!0),p(u,d,m,y).then(e=>{P(e),v("Your unstake position request has been sent.","completed",void 0,{hash:e,successMsg:"You have successfully unstaked position!",failureMsg:"Failed to unstake position."})}).catch(e=>{x(!1),(0,c.getLogger)().error("StakePosition.UnstakePositionFailed: ",{positionId:d,gaugeAddress:u,error:e.message}),v(e.message.includes("reject")?"User rejected the transaction.":"Failed to unstake position.","failed")})};return!w&&(0,r.jsx)(S,{width:t,minWidth:n,isLoading:b,disabled:w,btnText:w?"Position Unstaked":"Unstake Position",onClick:M,...k})}},30990:function(e,t,n){n.d(t,{c:function(){return c},i:function(){return u}});var r=n(79570),i=n(78714),a=n(8481),o=n(16405);let s=o.createContext(null),c=e=>{let{children:t,positionId:n,token0Address:c,token1Address:u,feeTier:d}=e,{data:l}=(0,i.p)(),{data:p}=(0,a.F)(),[f,g]=(0,o.useState)(!1),h=(0,o.useMemo)(()=>{if(c&&u&&d&&l)return(0,i.J)(l,c,u,d)},[c,u,d,l]);return(0,o.useEffect)(()=>{g((null!=p?p:[]).includes(n))},[p,n]),(0,r.jsx)(s.Provider,{value:{positionId:n,stakePool:h,staked:f,setStaked:g},children:t})},u=()=>o.useContext(s)},24262:function(e,t,n){n.d(t,{K:function(){return b}});var r=n(92228),i=n(79570),a=n(69987),o=n(58694),s=n(89700),c=n(4250),u=n(64928),d=n(16405),l=n(92321),p=n(66886);function f(){let e=(0,r.Z)(["\n  background: ",";\n  color: ",";\n  :hover,\n  :active,\n  :disabled {\n    background: ","CC !important;\n  }\n"]);return f=function(){return e},e}let g=(0,o.ZP)(a.zxk).withConfig({componentId:"sc-5c1c1dc7-0"})(f(),e=>{let{theme:t,isDeletingLastTrigger:n}=e;return!n&&t.colors.errorWarning.pink},e=>{let{theme:t,isDeletingLastTrigger:n}=e;return!n&&t.colors.errorWarning.red},e=>{let{theme:t,isDeletingLastTrigger:n}=e;return!n&&t.colors.errorWarning.pink}),h=e=>{let{taskId:t,onClose:n,onDelete:r,isDeletingLastTrigger:o=!1,width:f="226px"}=e,{isLoading:h,signAndDeleteTrigger:k}=(0,s.h)(),{address:m,chain:y}=(0,l.m)(),{addSnackbar:v}=(0,p.D)(),{mutate:b}=(0,u.w)(),{mutate:S}=(0,c.t)(),x=(0,d.useCallback)(e=>{let t={ownerAddr:m,chainId:y.id,taskId:e};k({payload:t,beforeRequest:()=>{v("Your delete strategy request has been sent.","completed"),n()}}).then(()=>{r&&r(),b(),S()}).catch(e=>{console.error(e)})},[v,m,y,b,S,n,r,k]);return(0,i.jsx)(g,{onClick:()=>x(t),disabled:void 0===t||h,variant:"contained",color:"primary",size:"lg",width:f,isDeletingLastTrigger:o,children:h?(0,i.jsx)(a.$jN,{}):o?"Yes, Delete":"Yes, delete strategy"})};function k(){let e=(0,r.Z)(["\n  display: flex;\n  padding-top: 24px;\n  gap: ",";\n"]);return k=function(){return e},e}function m(){let e=(0,r.Z)(["\n  padding-block: 10px;\n  font-size: 16px;\n  line-height: 20px;\n  font-weight: 500;\n"]);return m=function(){return e},e}let y=o.ZP.div.withConfig({componentId:"sc-7b22dbce-0"})(k(),e=>{let{theme:t}=e;return t.spacing.md}),v=(0,o.ZP)(a.zxk).withConfig({componentId:"sc-7b22dbce-1"})(m()),b=e=>{let{tokens:t,conditionSpotPrice:n,triggerInfo:r,revenueEarned:o,timeBuffer:s,frequency:c,onClose:u,onDelete:d,taskId:l,isDeletingLastTrigger:p=!1}=e;return(0,i.jsxs)(i.Fragment,{children:[p?(0,i.jsx)(a.VxM,{type:a.okG.Delete_Last_Trigger}):(0,i.jsx)(a.nO$,{tokens:t,conditionSpotPrice:n,triggerInfo:r,revenueEarned:o,timeBuffer:s,frequency:c}),(0,i.jsxs)(y,{children:[p&&(0,i.jsx)(v,{width:"216px",variant:"contained",color:"default",size:"lg",onClick:u,children:"No"}),(0,i.jsx)(h,{width:p?"216px":"100%",taskId:l,onClose:u,onDelete:d,isDeletingLastTrigger:p}),!p&&(0,i.jsx)(a.zxk,{onClick:u,variant:"contained",color:"secondary",size:"lg",width:"100%",children:"Not now"})]})]})}},6100:function(e,t,n){n.d(t,{w:function(){return i}});var r=n(28388);let i=[r.ActionTypeEnum.Values.RecurringPercentage,r.ActionTypeEnum.Values.RecurringPrice,r.ActionTypeEnum.Values.RecurringRatio,r.ActionTypeEnum.Values.RecurringDualAction]},11141:function(e,t,n){n.d(t,{O:function(){return a}});var r=n(62942),i=n(92321);let a=()=>{let{isConnected:e}=(0,i.m)(),{isChainSupported:t}=(0,r.L)();return{isReady:e&&t}}},66360:function(e,t,n){n.d(t,{V:function(){return s},X:function(){return c}});var r=n(6100),i=n(76793),a=n(16405),o=n(64928);let s=(e,t)=>{let{data:n}=(0,o.w)();return(0,a.useMemo)(()=>(0,i.nZ)(null==n?void 0:n[t],r.w,e)[0],[e,n])},c=(e,t)=>{let{data:n}=(0,o.w)();return(0,a.useMemo)(()=>(0,i.nZ)(null==n?void 0:n[t],"Reinvest",e)[0],[e,n])}},89700:function(e,t,n){n.d(t,{h:function(){return l}});var r=n(66886),i=n(76793),a=n(70502),o=n(22117),s=n.n(o),c=n(16405),u=n(92321),d=n(8768);function l(){let{address:e}=(0,u.m)(),{signMessageAsync:t}=(0,d.Q)(),{addSnackbar:n}=(0,r.D)(),[o,l]=(0,c.useState)(!1),p=n=>(l(!0),t({account:e,message:s()(n)}).catch(e=>{throw Error(e.message)})),f=(e,t)=>{if("Success"===e)return n(t,"completed"),e;throw Error(e)},g=(e,t)=>{throw n(t+e,"failed"),Error(e)},h=()=>{l(!1)},k=(0,a.$)(async e=>{let{payload:t,successTip:n,errorTip:r="Your create strategy request has failed: ",permitInfo:a}=e;return p(t).then(e=>(0,i.$y)(t,e,a)).catch(e=>{throw Error((0,i.cr)(e))}).then(e=>f(e,n)).catch(e=>{var t;g(null!==(t=e.message)&&void 0!==t?t:e,r)}).finally(h)}),m=(0,a.$)(async e=>{let{payload:t,successTip:n,errorTip:r="Your strategy update request has failed: "}=e;return p(t).then(e=>(0,i.dq)(t,e)).then(e=>f(e,n)).catch(e=>{g(e,r)}).finally(h)}),y=(0,a.$)(async e=>{let{payload:t,successTip:n="Your strategy has been deleted.",errorTip:r="Your strategy delete request has failed: ",beforeRequest:a}=e;return p(t).then(e=>(a&&a(),(0,i.ZW)(t,e))).then(e=>f(e,n)).catch(e=>{g(e,r)}).finally(h)});return{isLoading:o,signAndCreateTrigger:k,signAndUpdateTrigger:m,signAndDeleteTrigger:y}}},2656:function(e,t,n){n.d(t,{v:function(){return o}});var r=n(39119),i=n(5632),a=n(70502);function o(e){let t=(0,i.useRouter)(),n=t.query[e],{updateUrlQuery:o}=(0,r.T)(),s=(0,a.$)(t=>{o(e,t)});return{selected:n,setSelected:s}}},4250:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(62942),i=n(5718),a=n(28388),o=n(3255),s=n(92321);let c=()=>{let{ammEnum:e,networkId:t}=(0,r.L)(),{address:n}=(0,s.m)();return(0,o.ZP)(n&&e&&t?"user-strategies-".concat(n,"-").concat(e,"-").concat(t):null,()=>u(e,t,n))},u=async(e,t,n)=>{let r=i.v.strategyEndpoint,o="%7B%22ownerAddr%22%3A%22".concat(n,"%22%2C%22amm%22%3A%22").concat(e,"%22%2C%22chainId%22%3A").concat(t,"%2C%22clientType%22%3A%22").concat(a.ClientTypeEnum.Enum.FRONTEND,"%22%7D");return(await fetch("".concat(r,"getStrategiesDetail?request=").concat(o))).json()}},8481:function(e,t,n){n.d(t,{F:function(){return c}});var r=n(62942),i=n(28388),a=n(2303),o=n(92321),s=n(78714);function c(){let{address:e,isConnected:t}=(0,o.m)(),{publicClient:n,networkId:i}=(0,r.L)(),{data:c}=(0,s.p)();return(0,a.Z)(t&&e&&c?"slipstream-stake-positions-".concat(e,"-").concat(i):null,()=>u(e,i,n,c))}async function u(e,t,n,r){let a=r.map(e=>e.gaugeAddress);return i.viem.getSlipStreamStakePositions(e,t,n,a)}}}]);
//# sourceMappingURL=4965-21f011c2db24c1be.js.map