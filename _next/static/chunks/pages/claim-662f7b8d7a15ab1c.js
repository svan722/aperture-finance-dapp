(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5835],{86304:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/claim",function(){return t(60701)}])},20973:function(e,n,t){"use strict";t.d(n,{cu:function(){return y},yv:function(){return c},zu:function(){return p},UZ:function(){return l},NO:function(){return d},on:function(){return u}});var i=t(28388),a=t(5112),r=t(44850),o=t.n(r),s=t(15229);function u(e){return{name:e.name,ticker:e.symbol,decimals:e.decimals,address:e.address,native:e.isNative}}function l(e,n,t){return e.address.toLowerCase()<=n.address.toLowerCase()?{token0:new a.Token(t,e.address,e.decimals),token1:new a.Token(t,n.address,n.decimals)}:{token0:new a.Token(t,n.address,n.decimals),token1:new a.Token(t,e.address,e.decimals)}}function c(e,n,t){let a=i.viem.getNativeCurrency(n);return t&&e===a.wrapped.symbol?a.symbol:e}function d(e,n){let t=i.viem.getNativeCurrency(n);return e===t.wrapped.address}function p(e,n,t,i){let a=o().add(o().multiply(e,t),o().multiply(n,i));if(0===o().compareTo(a,0))return{token0Percent:"-",token1Percent:"-"};{let r=o().multiply(e,t),s=0===o().compareTo(r,0)?"0":o().multiply(o().divide(r,a,2),100),u=o().multiply(n,i),l=0===o().compareTo(u,0)?"0":o().multiply(o().divide(u,a,2),100);return{token0Percent:s,token1Percent:l}}}let y=e=>parseFloat((0,s.b)(null!=e?e:0n,6))},11141:function(e,n,t){"use strict";t.d(n,{O:function(){return r}});var i=t(62942),a=t(92321);let r=()=>{let{isConnected:e}=(0,a.m)(),{isChainSupported:n}=(0,i.L)();return{isReady:e&&n}}},60701:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return el}});var i=t(92228),a=t(79570),r=t(24002),o=t(90144),s=t(62942),u=t(66886),l=t(27947),c=t(20973),d=t(11141),p=t(15420),y=t(69758),m=t(28388),f=t(43210),g=JSON.parse('[{"type":"constructor","inputs":[{"name":"_token","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"claim","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"claimedAmounts","inputs":[{"name":"","type":"uint64","internalType":"uint64"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getClaimable","inputs":[{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"claimable","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getVestable","inputs":[{"name":"vestingScheduleId","type":"uint64","internalType":"uint64"}],"outputs":[{"name":"vestable","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getVestingInfo","inputs":[{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"res","type":"tuple[]","internalType":"struct Vesting.VestingInfo[]","components":[{"name":"startTime","type":"uint64","internalType":"uint64"},{"name":"endTime","type":"uint64","internalType":"uint64"},{"name":"startAmount","type":"uint256","internalType":"uint256"},{"name":"endAmount","type":"uint256","internalType":"uint256"},{"name":"claimedAmount","type":"uint256","internalType":"uint256"},{"name":"claimableAmount","type":"uint256","internalType":"uint256"},{"name":"revoked","type":"bool","internalType":"bool"},{"name":"grantType","type":"uint64","internalType":"uint64"}]}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"register","inputs":[{"name":"schedules","type":"tuple[]","internalType":"struct Vesting.VestingSchedule[]","components":[{"name":"beneficiary","type":"address","internalType":"address"},{"name":"startTime","type":"uint64","internalType":"uint64"},{"name":"endTime","type":"uint64","internalType":"uint64"},{"name":"startAmount","type":"uint256","internalType":"uint256"},{"name":"endAmount","type":"uint256","internalType":"uint256"},{"name":"revoked","type":"bool","internalType":"bool"},{"name":"grantType","type":"uint64","internalType":"uint64"}]}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revoke","inputs":[{"name":"scheduleIdsToRevoke","type":"uint64[]","internalType":"uint64[]"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"token","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IERC20"}],"stateMutability":"view"},{"type":"function","name":"totalVestingSchedules","inputs":[],"outputs":[{"name":"","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"vestingScheduleIds","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"vestingSchedules","inputs":[{"name":"","type":"uint64","internalType":"uint64"}],"outputs":[{"name":"beneficiary","type":"address","internalType":"address"},{"name":"startTime","type":"uint64","internalType":"uint64"},{"name":"endTime","type":"uint64","internalType":"uint64"},{"name":"startAmount","type":"uint256","internalType":"uint256"},{"name":"endAmount","type":"uint256","internalType":"uint256"},{"name":"revoked","type":"bool","internalType":"bool"},{"name":"grantType","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"withdraw","inputs":[{"name":"recipient","type":"address","internalType":"address"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"error","name":"AddressEmptyCode","inputs":[{"name":"target","type":"address","internalType":"address"}]},{"type":"error","name":"AddressInsufficientBalance","inputs":[{"name":"account","type":"address","internalType":"address"}]},{"type":"error","name":"FailedInnerCall","inputs":[]},{"type":"error","name":"OwnableInvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"OwnableUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"}]},{"type":"error","name":"SafeERC20FailedOperation","inputs":[{"name":"token","type":"address","internalType":"address"}]}]');let T="0x5Ec3445194fF89b2B4FD6A61D9432BA76c50a3b1",b=(0,y.u)(m.ApertureSupportedChainId.ARBITRUM_MAINNET_CHAIN_ID);async function v(e){return b.readContract({address:T,abi:g,functionName:"getVestingInfo",args:[e]})}async function h(e,n){return n.writeContract({chain:f.y,address:T,abi:g,functionName:"claim",account:e})}var w=t(17625),x=t(88176),C=t(14122),k=t(75619),I=t(33504),A=t(71692),M=t(16405),N=t(58694),Z=t(45775),j=t(61228),R=t(76170),_=t(93054),S=t(15102),E=t(95946),O=t(92106);async function P({hash:e,signature:n}){let i=(0,S.v)(n)?n:(0,O.NC)(n),a=(0,S.v)(e)?e:(0,O.NC)(e),r=(0,E.ly)(`0x${i.slice(130)}`);(0===r||1===r)&&(r+=27);let{secp256k1:o}=await t.e(1578).then(t.bind(t,61578)),s=o.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(r-27).recoverPublicKey(a.substring(2)).toHex(!1);return`0x${s}`}async function B({hash:e,signature:n}){return function(e){let n=(0,_.w)(`0x${e.substring(4)}`).substring(26);return(0,Z.x)(`0x${n}`)}(await P({hash:e,signature:n}))}async function L({message:e,signature:n}){return B({hash:(0,R.r)(e),signature:n})}async function F({address:e,message:n,signature:t}){return(0,j.E)((0,Z.K)(e),await L({message:n,signature:t}))}var U=t(92321),V=t(75282),z=t(92467),D=t(8768);function H(){let e=(0,i.Z)(["\n  width: 100%;\n  min-height: calc(100vh - 100px);\n  align-items: center;\n"]);return H=function(){return e},e}function $(){let e=(0,i.Z)(["\n  flex: 1;\n  margin: 20px 0 40px;\n  width: 100%;\n  max-width: 1080px;\n  z-index: 1;\n"]);return $=function(){return e},e}function q(){let e=(0,i.Z)(["\n  margin: auto;\n  width: fit-content;\n"]);return q=function(){return e},e}function K(){let e=(0,i.Z)(["\n  font-family: Dunbar Tall;\n  font-weight: 500;\n  font-size: 34px;\n  line-height: 34px;\n  color: ",";\n"]);return K=function(){return e},e}function Y(){let e=(0,i.Z)(["\n  width: 100%;\n  margin: auto;\n  gap: 24px;\n  align-items: center;\n  justify-content: center;\n  font-family: Roboto Flex;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 20px;\n  color: ",";\n  text-align: center;\n\n  > svg,\n  path {\n    width: 70px;\n    height: 60px;\n    fill: ",";\n  }\n"]);return Y=function(){return e},e}function Q(){let e=(0,i.Z)(["\n  margin-top: 30px;\n"]);return Q=function(){return e},e}function W(){let e=(0,i.Z)(["\n  padding: 12px 80px;\n  font-size: 14px;\n  line-height: 16px;\n  font-weight: 500;\n  color: ",";\n  background: ",";\n  border: 1px solid ",";\n  transition: all "," ease-in-out !important;\n  &:hover,\n  &:active {\n    opacity: 0.8;\n  }\n  :disabled {\n    background: ",";\n    color: ",";\n    border: ",";\n  }\n"]);return W=function(){return e},e}function X(){let e=(0,i.Z)(["\n  height: 80px;\n  width: 80px;\n  animation: rotation infinite 3s linear;\n  @keyframes rotation {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return X=function(){return e},e}function G(){let e=(0,i.Z)(["\n  background: ",";\n"]);return G=function(){return e},e}let J=(0,N.ZP)(x.tu).withConfig({componentId:"sc-4049fccb-0"})(H()),ee=(0,N.ZP)(x.tu).withConfig({componentId:"sc-4049fccb-1"})($()),en=(0,N.ZP)(x.tu).withConfig({componentId:"sc-4049fccb-2"})(q()),et=N.ZP.div.withConfig({componentId:"sc-4049fccb-3"})(K(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),ei=(0,N.ZP)(x.tu).withConfig({componentId:"sc-4049fccb-4"})(Y(),e=>{let{theme:n}=e;return n.colors.global.text.T1},e=>{let{theme:n}=e;return n.colors.global.text.T1}),ea=N.ZP.div.withConfig({componentId:"sc-4049fccb-5"})(Q()),er=(0,N.ZP)(k.z).withConfig({componentId:"sc-4049fccb-6"})(W(),e=>{let{theme:n}=e;return n.colors.global.textAlt.T1},e=>{let{theme:n}=e;return n.colors.global.text.T1},e=>{let{theme:n}=e;return n.colors.global.text.T1},e=>{let{theme:n}=e;return n.transitions.fast},e=>{let{theme:n}=e;return"".concat(n.colors.global.line.Line1," !important")},e=>{let{theme:n}=e;return"".concat(n.colors.global.text.T3," !important")},e=>{let{theme:n}=e;return"1px solid ".concat(n.colors.global.line.Line1," !important")}),eo=(0,N.ZP)(w.An).withConfig({componentId:"sc-4049fccb-7"})(X()),es=(0,N.ZP)(C.$jN).withConfig({componentId:"sc-4049fccb-8"})(G(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),eu={0:"liquidityMining",1:"privateBeta",2:"investor",3:"employee"};function el(){var e,n;let t=(0,N.Fg)(),{showModal:i,hideModal:y}=(0,C.ddY)(),{address:f}=(0,U.m)(),{switchChain:g,isError:T,error:b}=(0,V.o)(),{isReady:x}=(0,d.O)(),{isChainSupported:k,network:Z}=(0,s.L)(),{data:j}=(0,z.p)(),{addSnackbar:R}=(0,u.D)(),{isProviderReady:_}=(0,r._W)(),{showConnectModal:S}=(0,l.bU)(),[E,O]=(0,M.useState)(void 0),{data:P,isLoading:B,error:L}=(0,p.d)(),[H,$]=(0,A.Z)("claim-signed-".concat(f)),[q,K]=(0,M.useState)(),[Y,Q]=(0,M.useState)(!1),[W,X]=(0,M.useState)(!1),[G,el]=(0,M.useState)({vesting:!1,sign:!1}),ec=Z===I.HL.ARBITRUM,{signMessageAsync:ed}=(0,D.Q)({mutation:{onSuccess:async(e,n)=>{let t=await F({address:f,message:n.message,signature:e});t?(O(void 0),$(!0)):console.log("Invalid signature"),el(e=>({...e,sign:!1}))},onError:e=>{R("Signing message error: ".concat(e.message),"failed"),el(e=>({...e,sign:!1}))}}}),ep=async()=>{el(e=>({...e,vesting:!0}));let e=await v(f),n=e.reduce((e,n)=>{if(!n.revoked){var t,i,a,r,o,s;let u=eu[Number(n.grantType)],l=(0,c.cu)(n.startAmount),d=(0,c.cu)(n.endAmount),p=(0,c.cu)(n.claimableAmount),y=(0,c.cu)(n.claimedAmount);e[u]={started:((null===(t=e[u])||void 0===t?void 0:t.started)||0)+l,allocated:((null===(i=e[u])||void 0===i?void 0:i.allocated)||0)+d,availableToClaim:((null===(a=e[u])||void 0===a?void 0:a.availableToClaim)||0)+p,claimed:((null===(r=e[u])||void 0===r?void 0:r.claimed)||0)+y},e.totalTokens=(e.totalTokens||0)+p,[2].includes(Number(n.grantType))&&(e[u].unvested=((null===(o=e[u])||void 0===o?void 0:o.unvested)||0)+((null===(s=e[u])||void 0===s?void 0:s.started)||0))}return e},{});K(n),el(e=>({...e,vesting:!1}))};(0,M.useEffect)(()=>{!x||!H||B||L||!P||(null==P?void 0:P.isRestricted)?O({Icon:w.jY,message:"Connect wallet and sign to see your token allocation."}):(ep(),O(void 0))},[Z,P,x,H,_,f]);let ey=async(e,n)=>{h(f,j).then(t=>{ep(),X(!0),Q(!1),i(C.ETH,{amount:e,unit:n})}).catch(e=>{Q(!1),R(e.message.includes("reject")?"User rejected the transaction.":"Failed to claim tokens.","failed")})},em=()=>{i(o.u,{switchToChain:I.HL.ARBITRUM,onclose:()=>{y(),null==g||g({chainId:m.ApertureSupportedChainId.ARBITRUM_MAINNET_CHAIN_ID})}})};(0,M.useEffect)(()=>{T&&(console.log("Failed to switch network",b),R("Your switch network request has failed","failed"))},[T]);let ef=B||!P||!x&&!E||!H&&!E||!q&&G.vesting,eg=!x||!H||(null==P?void 0:P.isRestricted);return!!P&&!(null==P?void 0:P.isRestricted)&&(0,a.jsx)(J,{children:ef?(0,a.jsx)(ee,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(eo,{fill:t.colors.global.text.T1})}):E?(0,a.jsxs)(ei,{children:[(0,a.jsx)(E.Icon,{}),(0,a.jsx)(ea,{children:E.message}),eg&&(0,a.jsx)(er,{variant:"contained",size:"lg",disabled:!k||L||(null==P?void 0:P.isRestricted)||G.sign,onClick:()=>{f?_&&(el(e=>({...e,sign:!0})),ed({account:f,message:"Get APTR Vesting Status."}).catch(e=>console.log(e))):S()},children:G.sign?(0,a.jsx)(es,{}):"Sign"})]}):x&&H&&(0,a.jsxs)(ee,{children:[(0,a.jsx)(et,{children:"Airdrop Dashboard"}),(0,a.jsxs)(en,{gap:"lg",children:[(0,a.jsx)(C.WAt,{}),q&&(0,a.jsx)(C.uKc,{totalTokens:q.totalTokens,liquidityMining:q.liquidityMining,privateBeta:q.privateBeta,investor:null!==(e=q.investor)&&void 0!==e?e:void 0,employee:null!==(n=q.employee)&&void 0!==n?n:void 0,onClick:()=>{ec?(Q(!0),ey(q.totalTokens,"APTR")):em()},claiming:Y,isClaimed:W})]})]})})}},61228:function(e,n,t){"use strict";t.d(n,{E:function(){return r}});var i=t(26087),a=t(60480);function r(e,n){if(!(0,a.U)(e,{strict:!1}))throw new i.b({address:e});if(!(0,a.U)(n,{strict:!1}))throw new i.b({address:n});return e.toLowerCase()===n.toLowerCase()}},8768:function(e,n,t){"use strict";t.d(n,{Q:function(){return l}});var i=t(87686),a=t(22980),r=t(81946),o=t(78855);async function s(e,n){let t;let{account:i,connector:s,...u}=n;t="object"==typeof i&&"local"===i.type?e.getClient():await (0,o.e)(e,{account:i,connector:s});let l=(0,r.s)(t,a.l,"signMessage");return l({...u,...i?{account:i}:{}})}var u=t(37122);function l(e={}){let{mutation:n}=e,t=(0,u.Z)(e),{mutate:a,mutateAsync:r,...o}=(0,i.D)({...n,mutationFn:e=>s(t,e),mutationKey:["signMessage"]});return{...o,signMessage:a,signMessageAsync:r}}}},function(e){e.O(0,[2467,2888,179],function(){return e(e.s=86304)}),_N_E=e.O()}]);
//# sourceMappingURL=claim-662f7b8d7a15ab1c.js.map