(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4576],{22359:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit-orders",function(){return t(2051)}])},89192:function(e,n,t){"use strict";t.d(n,{B:function(){return C},Z:function(){return P}});var i=t(92228),o=t(79570),r=t(62942),l=t(28388),c=t(2303),a=t(15229),s=t(92321);async function u(e,n,t,i,o){let r=await e.readContract({address:t,abi:l.IERC20__factory.abi,functionName:"allowance",args:[n,o]});return{allowanceBN:r,allowance:(0,a.b)(r,i)}}var d=t(21154),f=t(25590),p=t(59426),m=t(17625),g=t(69987),x=t(44850),h=t.n(x),k=t(16405),v=t(58694),b=t(66886);function y(){let e=(0,i.Z)(["\n  width: ","px;\n  height: ","px;\n  > circle {\n    stroke: ",";\n  }\n"]);return y=function(){return e},e}let w=(0,v.ZP)(m.iO).withConfig({componentId:"sc-f4be3e47-0"})(y(),e=>{let{loadingWidth:n}=e;return n||20},e=>{let{loadingHeight:n}=e;return n||20},e=>{let{loadingColor:n}=e;return n||"white"});function T(){let e=(0,i.Z)(["\n  ",";\n  cursor: ",';\n  padding: 0;\n  padding-inline: 0;\n  font-family: "Roboto Flex";\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px;\n']);return T=function(){return e},e}let j=(0,v.ZP)(g.zxk).withConfig({componentId:"sc-32974dc8-0"})(T(),e=>{let{btntype:n,theme:t,disabled:i}=e;return"success"==n?"\n    background: ".concat(t.colors.global.background.BG3," !important;\n    color: ").concat(t.colors.global.success," !important;\n    border: 2px solid ").concat(t.colors.global.background.BG3," !important;\n    opacity: ").concat(i?.5:1,";\n    :hover {\n        background: ").concat(t.colors.global.background.BG3," !important;\n        opacity: ").concat(i?.5:.8,"\n    }\n  "):"connect"==n?"\n    background: none !important;\n    color: ".concat(t.colors.global.primary," !important;\n    border: 2px solid ").concat(t.colors.global.primary," !important;\n    opacity: ").concat(i?.3:1,";\n    :hover {\n        background: none !important;\n        opacity: ").concat(i?.3:.8,"\n    }\n  "):"\n    background: none !important;\n    color: ".concat(t.colors.global.primary," !important;\n    border: 2px solid ").concat(t.colors.global.primary," !important;\n    opacity: ").concat(i?.5:1,";\n    :hover {\n        background: none !important;\n        opacity: ").concat(i?.5:.8,"\n    }\n  ")},e=>{let{disabled:n}=e;return n?"auto":"pointer"}),C=e=>{let{token:n,contractAddress:t,amount:i,useSpecificAmount:a=!1,canBeZero:x=!1,approveOnChange:v,variant:y="contained",color:T="primary",style:C,useNative:P,hidden:I,loading:S=!1,loadingColor:Z,loadingWidth:L,loadingHeight:E}=e,{isConnected:F,address:O}=(0,s.m)(),{isChainSupported:_}=(0,r.L)(),{addSnackbar:D}=(0,b.D)(),[N,A]=(0,k.useState)(-1),[M,z]=(0,k.useState)(void 0),R=null==n?void 0:n.address,B=(0,k.useMemo)(()=>{let e=a?h().round(h().multiply(i,10**(null==n?void 0:n.decimals)),0,h().RoundingModes.UP):p.fV;return{from:O,to:R,data:l.IERC20__factory.createInterface().encodeFunctionData("approve",[t,e])}},[i,t,null==n?void 0:n.decimals,R,a,O]),{data:Y,isLoading:H,mutate:U}=function(e,n,t){var i;let{address:o,isConnected:l}=(0,s.m)(),{networkId:a,publicClient:d}=(0,r.L)(),f=l&&a&&o&&a===(null===(i=d.chain)||void 0===i?void 0:i.id);return(0,c.Z)(f?"user-token-allowance-".concat(o,"-").concat(e,"-").concat(t):null,()=>u(d,o,e,n,t))}(R,n?n.decimals:18,t);(0,k.useEffect)(()=>{!H&&Y&&(0,l.getLogger)().debug("Token.ApprovalData",{approvalData:Y})},[H,Y]);let{ready:G,data:W,sendTransaction:J,isPending:V,isSuccess:$}=(0,f.i)(B),{data:q,isError:K,isLoading:X}=(0,d.B)({hash:M});(0,k.useEffect)(()=>{U()},[F,_]),(0,k.useEffect)(()=>{!V&&$&&A(0)},[V,$]),(0,k.useEffect)(()=>{W&&(z(W),D("Your approve request has been sent.","completed",void 0,{hash:W,successMsg:"You have successfully approved ".concat((null==n?void 0:n.ticker)||"token"),failureMsg:"".concat((null==n?void 0:n.ticker)||"Token"," approval failed")}))},[W]);let Q=(0,k.useRef)(null);(0,k.useEffect)(()=>{!X&&q&&"success"===q.status&&(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{U(),z(void 0),A(1)},500))},[q,X]),(0,k.useEffect)(()=>{K&&(z(void 0),A(1))},[K]),(0,k.useEffect)(()=>{var e;F&&v(!!P||0>=h().compareTo(i,null!==(e=null==Y?void 0:Y.allowance)&&void 0!==e?e:"0"))},[Y,P,i,F]);let ee=(0,k.useMemo)(()=>{var e;return!F||!_||!Y||(x?0>h().compareTo(i,"0"):0>=h().compareTo(i,"0"))||0>=h().compareTo(i,null!==(e=null==Y?void 0:Y.allowance)&&void 0!==e?e:"0")||H||V||0===N||!n},[F,_,n,i,Y,H,V,N]),en=(0,k.useMemo)(()=>{var e;if(!F)return"Connect Wallet";if(!_)return"Wrong Network";if(!n)return"Select Token";if(x?0>h().compareTo(i,"0"):0>=h().compareTo(i,"0"))return"Input Token Amount";if(!Y||H)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.$jN,{})," Loading"]});if(V||0===N)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.$jN,{})," Approving"]});if(0>=h().compareTo(i,null!==(e=null==Y?void 0:Y.allowance)&&void 0!==e?e:"0"))return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.Ol,{width:20,height:20}),"Approved ",null==n?void 0:n.ticker]});else return"Approve ".concat(null==n?void 0:n.ticker)},[F,_,n,i,Y,H,V,N]),et=(0,k.useMemo)(()=>{var e;if(!F)return"connect";if(!_||!n||(x?0>h().compareTo(i,"0"):0>=h().compareTo(i,"0")))return"";if(!Y||H)return"";if(V||0===N)return"";if(0>=h().compareTo(i,null!==(e=null==Y?void 0:Y.allowance)&&void 0!==e?e:"0"))return"success";else return""},[F,_,n,i,Y,H,V,N]);return(0,o.jsx)(o.Fragment,{children:!(P||I)&&(0,o.jsx)(j,{variant:y,size:"lg",width:"100%",style:C,onClick:()=>null==J?void 0:J(),disabled:ee,btntype:et,children:S?(0,o.jsx)(w,{loadingColor:Z,loadingWidth:L,loadingHeight:E}):en})})};var P=C},71321:function(e,n,t){"use strict";var i=t(92228),o=t(79570),r=t(62942),l=t(21154),c=t(25590),a=t(69987),s=t(28388),u=t(16405),d=t(58694),f=t(66886);function p(){let e=(0,i.Z)(["\n  margin: auto;\n"]);return p=function(){return e},e}function m(){let e=(0,i.Z)(["\n  font-size: 16px;\n  line-height: 20px;\n"]);return m=function(){return e},e}let g=d.ZP.div.withConfig({componentId:"sc-ec166834-0"})(p()),x=(0,d.ZP)(a.zxk).withConfig({componentId:"sc-ec166834-1"})(m()),h=e=>{let{text:n,positionIdBN:t,color:i="primary",tokenPair:d,disabled:p,onApproved:m,handleError:h,...k}=e,{ammEnum:v,networkId:b}=(0,r.L)(),{addSnackbar:y}=(0,f.D)(),[w,T]=(0,u.useState)(void 0),j=(0,u.useMemo)(()=>{let e=(0,s.getChainInfo)(b);return{to:e.amms[v].nonfungiblePositionManager,data:s.ICommonNonfungiblePositionManager__factory.createInterface().encodeFunctionData("approve",[e.amms[v].apertureAutoman,t])}},[b,t]),{ready:C,data:P,sendTransaction:I,error:S,isError:Z,isPending:L,isSuccess:E}=(0,c.i)(j),{data:F,error:O,isError:_,isLoading:D,isSuccess:N}=(0,l.B)({hash:w}),A=(0,u.useCallback)(e=>{null==h||h(e),y("Failed: "+e,"failed")},[y,h]);return(0,u.useEffect)(()=>{E&&P&&T(P)},[E,P]),(0,u.useEffect)(()=>{N&&F&&(m(),y("You have successfully set up on-chain approval for your ".concat(null!=d?d:t.toString()," position."),"completed"))},[N,F]),(0,u.useEffect)(()=>{Z&&A(S.message)},[Z,A,S]),(0,u.useEffect)(()=>{_&&A(O.message)},[_,O]),(0,o.jsx)(x,{onClick:()=>null==I?void 0:I(),disabled:!C||L||D||E||N||p,variant:"contained",color:i,size:"lg",invalid:!1,width:"100%",...k,children:L||D?(0,o.jsx)(g,{children:(0,o.jsx)(a.$jN,{})}):n})};n.Z=h},83364:function(e,n,t){"use strict";var i=t(92228),o=t(79570),r=t(17625),l=t(69987),c=t(22117),a=t.n(c),s=t(16405),u=t(58694),d=t(92321),f=t(8768),p=t(66886);function m(){let e=(0,i.Z)(["\n  margin: auto;\n"]);return m=function(){return e},e}let g=u.ZP.div.withConfig({componentId:"sc-f3873ba5-0"})(m()),x=e=>{let{isLoading:n,text:t,payload:i,color:c="primary",setSignedPayload:u,handleError:m,showStartIcon:x=!1,noFeeNotification:h=(0,o.jsx)(o.Fragment,{}),width:k="100%",disabled:v=!1,...b}=e,{address:y}=(0,d.m)(),{addSnackbar:w}=(0,p.D)(),T=a()(i),{data:j,error:C,isPending:P,isSuccess:I,signMessage:S,isError:Z}=(0,f.Q)();(0,s.useEffect)(()=>{I&&u(j)},[I]),(0,s.useEffect)(()=>{Z&&C&&(null==m||m(C.message),w("Failed: "+C.message,"failed"))},[Z]);let L=P||n;return(0,o.jsxs)(l.zxk,{...b,onClick:()=>!L&&S({account:y,message:T}),disabled:L||v,variant:"contained",color:c,size:"lg",invalid:!1,width:k,startIcon:!L&&x&&(0,o.jsx)(r.Ol,{width:16,height:16}),children:[L?(0,o.jsx)(g,{children:(0,o.jsx)(l.$jN,{})}):t,!L&&h]})};n.Z=x},3552:function(e,n,t){"use strict";t.d(n,{Z:function(){return L}});var i=t(92228),o=t(79570),r=t(62942),l=t(84401),c=t(28388),a=t(3255),s=t(92321);let u=e=>{let{ammEnum:n,networkId:t,publicClient:i}=(0,r.L)(),{address:o,isConnected:l}=(0,s.m)();return(0,a.ZP)(o&&l&&n&&t?"position-typed-data-".concat(e,"-").concat(n,"-").concat(t):null,()=>d(e,n,t,i))};async function d(e,n,t,i){let o=BigInt((0,l.r7)());return c.viem.generateTypedDataForPermit(t,n,e,o,i)}var f=t(70502),p=t(69987),m=t(16405),g=t(58694),x=t(87686),h=t(20679),k=t(81946),v=t(78855);async function b(e,n){let t;let{account:i,connector:o,...r}=n;t="object"==typeof i&&"local"===i.type?e.getClient():await (0,v.e)(e,{account:i,connector:o});let l=(0,k.s)(t,h.x,"signTypedData");return l({...r,...i?{account:i}:{}})}var y=t(37122),w=t(66886);function T(){let e=(0,i.Z)(["\n  margin: auto;\n"]);return T=function(){return e},e}function j(){let e=(0,i.Z)(["\n  font-size: 16px;\n  line-height: 20px;\n"]);return j=function(){return e},e}let C=g.ZP.div.withConfig({componentId:"sc-4a064a3c-0"})(T()),P=(0,g.ZP)(p.zxk).withConfig({componentId:"sc-4a064a3c-1"})(j()),I=e=>{let{positionId:n,tokenPair:t,disabled:i,setPermitInfo:r,handleError:l,...c}=e,{isPending:a,disabledSign:s,signPositionPermit:d}=function(e){let{positionId:n,setPermitInfo:t,successTips:i}=e,{addSnackbar:o}=(0,w.D)(),r=(0,f.$)(n=>{var t;null===(t=e.onError)||void 0===t||t.call(e,n),o("Failed: "+n,"failed")}),{data:l,error:c}=u(n);(0,m.useEffect)(()=>{c&&r(c)},[c,r]);let{signTypedData:a,isPending:s,isSuccess:d}=function(e={}){let{mutation:n}=e,t=(0,y.Z)(e),{mutate:i,mutateAsync:o,...r}=(0,x.D)({...n,mutationFn:e=>b(t,e),mutationKey:["signTypedData"]});return{...r,signTypedData:i,signTypedDataAsync:o}}(),p=(0,f.$)(()=>{a(l,{onSuccess:e=>{e&&(t({signature:e,deadline:null==l?void 0:l.message.deadline}),o(i,"completed"))},onError:e=>r(e.message)})});return{signPositionPermit:p,isPending:s,disabledSign:!l||s||d}}({positionId:n,setPermitInfo:r,successTips:"You have successfully set up a single-use authorization for your ".concat(null!=t?t:n.toString()," position."),onError:l});return(0,o.jsx)(Z,{...c,disabled:i||s,onClick:d,isLoading:a})},S=e=>{let{color:n="primary",isLoading:t,children:i="Sign Position Permit"}=e;return(0,o.jsx)(P,{variant:"contained",size:"lg",color:n,invalid:!1,width:"100%",...e,children:t?(0,o.jsx)(C,{children:(0,o.jsx)(p.$jN,{})}):i})},Z=m.memo(S);var L=I},10661:function(e,n,t){"use strict";t.d(n,{t:function(){return r}});var i=t(79570),o=t(69987);let r=e=>{let{commonTokens:n,selectedToken:t=null,selectToken:r,selectUnknownToken:l,handleUnknownAddress:c,customClose:a,onClose:s}=e;return(0,i.jsx)(o.Cou,{commonTokens:n,selectedToken:t,selectToken:r,selectUnknownToken:l,handleUnknownAddress:c,customClose:a,onClose:s})}},2051:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return nt}});var i=t(92228),o=t(79570),r=t(62942),l=t(89011),c=t(76793),a=t(16312),s=t(64928),u=t(80631),d=t(69987),f=t(14122),p=t(16405),m=t(58694),g=t(92321),x=t(17625),h=t(78545),k=t(83364),v=t(13321),b=t(66886),y=t(47314),w=t(85464),T=t(61029),j=t(95220),C=t(5632);function P(){let e=(0,i.Z)(["\n  width: 200px;\n  height: 38px;\n  padding: 0 12px;\n  font-size: 14px;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  &:hover {\n    background: ",";\n    opacity: 0.8;\n  }\n"]);return P=function(){return e},e}let I=(0,m.ZP)(k.Z).withConfig({componentId:"sc-2fd20ba5-0"})(P(),e=>{let{theme:n}=e;return n.colors.global.background.BG2},e=>{let{theme:n}=e;return n.colors.global.primary},e=>{let{theme:n}=e;return n.colors.global.primary},e=>{let{theme:n}=e;return n.colors.global.background.BG2}),S=e=>{let{order:n}=e,{address:t}=(0,g.m)(),{networkId:i}=(0,r.L)(),{addSnackbar:l}=(0,b.D)(),{mutate:a}=(0,s.w)(!0),[u,f]=(0,p.useState)(""),m={ownerAddr:t,chainId:i,taskId:Number(n.orderId)},x=(0,C.useRouter)(),{setPositionPage:h}=(0,v.q)();return(0,p.useEffect)(()=>{u&&(0,c.ZW)(m,u).then(e=>{l("Your ".concat(n.tokenBuy.ticker,"-").concat(n.tokenSell.ticker," limit order has been canceled."),"completed"),a()}).catch(e=>{l("Your limit order cancel request has failed: "+e,"failed")})},[u]),(0,o.jsx)(d.Fkr,{from:{ticker:n.tokenBuy.ticker,Icon:(0,y.Y)(n.tokenBuy.address,n.tokenBuy.ticker,n.chainId)},to:{ticker:n.tokenSell.ticker,Icon:(0,y.Y)(n.tokenSell.address,n.tokenSell.ticker,n.chainId)},dateTime:(0,j.n)(n.timestamp),info:{buyAmount:(0,T.LH)(n.buyAmount),sellAmount:(0,T.LH)(n.sellAmount),limitPrice:(0,T.T4)(n.buyRatio),feeTier:n.feeTier,min:(0,T.T4)(n.amountMinimum),max:(0,T.T4)(n.amountMaximum),revenue:{earnedFeeInputToken:n.feeRevenue.earnedFeeInputToken,earnedFeeOutputToken:n.feeRevenue.earnedFeeOutputToken}},status:n.status,notification:n.notification,Btn:(0,o.jsx)(I,{text:"Cancel Order",payload:m,setSignedPayload:f,width:"200px"}),navTo:()=>{h("details"),x.push({pathname:"/liquidity-management",query:{[w.EM.PID]:"".concat(n.chainId,"-").concat(n.nftId)}})}},"Order-".concat(n.orderId,"-").concat(n.chainId))};function Z(){let e=(0,i.Z)(["\n  margin-top: 12px;\n  color: ",";\n"]);return Z=function(){return e},e}function L(){let e=(0,i.Z)(["\n  width: 100%;\n  min-height: 318px;\n  max-height: 747px;\n  overflow-y: auto;\n  margin-top: 12px;\n  gap: ",";\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  > div {\n    width: calc(100% - 32px);\n  }\n  ::-webkit-scrollbar {\n    width: 0;\n  }\n  padding: 1px;\n"]);return L=function(){return e},e}function E(){let e=(0,i.Z)(["\n  width: 100%;\n  height: 276px;\n  margin-top: 12px;\n  font-weight: 500;\n  border-radius: ",";\n  justify-content: center;\n  align-items: center;\n  gap: ",";\n  border: 1px solid ",";\n  color: ",";\n  ","\n"]);return E=function(){return e},e}let F=m.ZP.div.withConfig({componentId:"sc-708a39c6-0"})(Z(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),O=m.ZP.div.withConfig({componentId:"sc-708a39c6-1"})(L(),e=>{let{theme:n}=e;return n.spacing.md},e=>{let{theme:n}=e;return n.colors.global.background.BG1},e=>{let{theme:n}=e;return n.colors.global.text.T1}),_=(0,m.ZP)(d.tuJ).withConfig({componentId:"sc-708a39c6-2"})(E(),e=>{let{theme:n}=e;return n.radii.md},e=>{let{theme:n}=e;return n.spacing.lg},e=>{let{theme:n}=e;return n.colors.global.line.Line1},e=>{let{theme:n}=e;return n.colors.global.text.T3},(0,h.qC)(h.bK,h.Dh)),D=e=>{let{showFulfilled:n,isLoading:t,limitOrders:i}=e,r=(0,m.Fg)(),l=n?i:i.filter(e=>e.status===d.iFo.ACTIVE||e.status===d.iFo.UNAUTHORIZED);return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsx)(F,{children:(0,o.jsx)(d.KTm,{size:"100%",height:"85px"})}):l&&l.length>0?(0,o.jsx)(O,{children:l.map(e=>(0,o.jsx)(S,{order:e},"limit-order-id"+e.orderId))}):(0,o.jsxs)(_,{height:"318px",children:[(0,o.jsx)(x.J9,{fill:r.colors.global.text.T1}),(0,o.jsx)(d.Bpc,{children:"Your Limit Order will appear here."})]})})};function N(){let e=(0,i.Z)(["\n  color: ",';\n  width: 100%;\n  height: 124px;\n  text-align: left;\n  font-family: "Dunbar Tall";\n  font-size: 24px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 32px;\n  text-transform: capitalize;\n']);return N=function(){return e},e}function A(){let e=(0,i.Z)(["\n  align-items: center;\n  color: ",';\n  font-family: "Roboto Flex";\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 20px;\n  text-transform: capitalize;\n']);return A=function(){return e},e}function M(){let e=(0,i.Z)(["\n  color: ",';\n  width: 168px;\n  text-align: right;\n  font-family: "Roboto Flex";\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px;\n  text-transform: capitalize;\n']);return M=function(){return e},e}let z=m.ZP.div.withConfig({componentId:"sc-9c4026bd-0"})(N(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),R=(0,m.ZP)(d.kCb).withConfig({componentId:"sc-9c4026bd-1"})(A(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),B=m.ZP.div.withConfig({componentId:"sc-9c4026bd-2"})(M(),e=>{let{theme:n}=e;return n.colors.global.text.T1});function Y(){let{ammEnum:e,networkId:n,publicClient:t}=(0,r.L)(),{data:i,isLoading:l}=(0,s.w)(!0),{isConnected:d}=(0,g.m)(),[m,x]=(0,p.useState)(!0),[h,k]=(0,p.useState)(!1),[v,b]=(0,p.useState)([]),{mutateWarningTokens:y}=(0,a.q)();return(0,p.useEffect)(()=>{if(i){var o,r;k(!0),(0,c.gC)(null!==(r=null===(o=i[n])||void 0===o?void 0:o.triggers)&&void 0!==r?r:[],n,e,y,t).then(e=>{b(e),k(!1)})}},[i]),(0,o.jsxs)("div",{children:[(0,o.jsx)(z,{}),(0,o.jsxs)(u.s0,{children:["Open Orders",(0,o.jsxs)(R,{children:[(0,o.jsx)(f.mGS,{noText:!0,onStatus:m,onChange:e=>{x(e)}}),(0,o.jsxs)(B,{children:[m?"Show":"Hide"," Fulfilled Orders"]})]})]}),(0,o.jsx)(D,{showFulfilled:m,isLoading:l||h,limitOrders:d?v:[]})]})}var H=t(59426),U=t(44850),G=t.n(U),W=t(41738),J=t(19034),V=t.n(J),$=t(54764),q=t.n($),K=t(55597),X=t(71321),Q=t(84401),ee=t(87076),en=t(23609),et=t(1127),ei=t(42732),eo=t(76826),er=t(21154),el=t(28388),ec=t(45775),ea=t(3552);function es(){let e=(0,i.Z)(["\n  display: flex;\n  padding-top: 24px;\n  gap: ",";\n\n  > div {\n    width: 100%;\n  }\n"]);return es=function(){return e},e}let eu=m.ZP.div.withConfig({componentId:"sc-de326982-0"})(es(),e=>{let{theme:n}=e;return n.spacing.md}),ed=e=>{let{txdata:n,txHash:t,tokenPair:i,gasCeiling:l,deadlineInDays:c,createTrigger:a,onclose:s}=e,{address:u}=(0,g.m)(),{ammEnum:f,networkId:m,publicClient:x}=(0,r.L)(),{ifAuthorized:h}=(0,et.I)(),{data:v}=(0,eo.m)(),{addSnackbar:y}=(0,b.D)(),{mutate:w}=(0,ei.u)(),{mutatePositionMap:T}=(0,en.M)(),{currentTokenPrice:j}=(0,ee.P)(m),{data:C,isLoading:P,isSuccess:I}=(0,er.B)({hash:t}),[S,Z]=(0,p.useState)(0),[L,E]=(0,p.useState)(0n),[F,O]=(0,p.useState)({onSuccess:!1,outerLimitPrice:void 0,inputCurrencyAmount:void 0,txReceipt:void 0}),[_,D]=(0,p.useState)(void 0),[N,A]=(0,p.useState)(void 0),[M,z]=(0,p.useState)(!1),[R,B]=(0,p.useState)({approved:!1,positionId:L,deadline:(0,Q.r7)(),signature:void 0}),Y=(0,p.useMemo)(()=>F.onSuccess&&(h||M||R.approved),[h,M,R.approved,F.onSuccess]);(0,p.useEffect)(()=>{let e=async e=>{var n,t;let i=(0,H._G)(m),o=await el.viem.PositionDetails.fromPositionId(m,f,e,x),r=i.get(o.token0.address),l=i.get(o.token1.address),c=o.position.amount0.toExact(),a=o.position.amount1.toExact(),s=null==j?void 0:null===(n=j[r.address])||void 0===n?void 0:n.price,u=null==j?void 0:null===(t=j[l.address])||void 0===t?void 0:t.price,d=G().multiply(c,s),p=G().multiply(a,u);G().add(d,p)};if(C&&!P&&I&&j){w(),T(),C.logs.forEach(e=>{e.blockNumber=Number(e.blockNumber),e.address=(0,ec.K)(e.address)});let t=el.viem.getMintedPositionIdFromTxReceipt(m,f,C,u);void 0===t?(y("Failed: No position found","failed"),s()):(e(t),O({onSuccess:!0,outerLimitPrice:n.outerLimitPrice,inputCurrencyAmount:n.inputCurrencyAmount,txReceipt:C}),E(t),Z(h||M?2:1))}},[C]);let U=e=>{s()};return(0,p.useEffect)(()=>{if(Y){let e=el.viem.generateLimitOrderCloseRequestPayload(null!=u?u:"0x",m,f,L.toString(),F.outerLimitPrice,Number(l)/100,(0,Q.fQ)(c));D(e)}},[Y]),(0,p.useEffect)(()=>{N&&(a(_,N,h||M?void 0:{deadline:String(R.deadline),signature:R.signature}),s())},[N]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.QS2,{amm:f,step:S,approveOnChain:v}),0===S&&(0,o.jsx)(eu,{children:(0,o.jsx)(d.zxk,{disabled:!0,variant:"contained",color:"primary",size:"lg",invalid:!1,width:"100%",children:(0,o.jsx)(d.$jN,{})})}),1===S&&(0,o.jsx)(eu,{children:v?(0,o.jsx)(X.Z,{text:"Approve on-chain",color:"secondary",tokenPair:i,positionIdBN:BigInt(L),onApproved:()=>{z(!0),Z(2)}}):(0,o.jsx)(ea.Z,{color:"secondary",positionId:L,setPermitInfo:e=>{B({approved:!0,positionId:L,deadline:parseFloat(e.deadline),signature:e.signature}),Z(2)},handleError:U,children:"Sign Position"})}),2===S&&(0,o.jsx)(eu,{children:(0,o.jsx)(k.Z,{text:"Sign Payload",color:"secondary",payload:_,setSignedPayload:A,handleError:U})})]})};var ef=t(68123),ep=t(25590);function em(){let e=(0,i.Z)(["\n  background-color: ",";\n\n  :hover {\n    background-color: ",";\n    opacity: 0.8;\n  }\n"]);return em=function(){return e},e}let eg=(0,m.ZP)(d.zxk).withConfig({componentId:"sc-bcda15f6-0"})(em(),e=>{let{theme:n,disabled:t}=e;return t?n.colors.global.primaryDisable:n.colors.global.primary},e=>{let{theme:n,disabled:t}=e;return t?n.colors.global.primaryDisable:n.colors.global.primary}),ex=e=>{let{sellToken:n,buyToken:t,feeTier:i,rangeWidth:l,gasCeiling:a,deadlineInDays:u,goBack:f}=e,{address:m}=(0,g.m)(),{ammEnum:x,networkId:h,publicClient:k}=(0,r.L)(),{addSnackbar:v}=(0,b.D)(),{theme:y}=(0,K.F)(),{showModal:w,hideModal:T}=(0,d.ddY)(),[j,C]=(0,p.useState)(void 0),[P,I]=(0,p.useState)({outerLimitPrice:void 0,inputCurrencyAmount:void 0}),[S,Z]=(0,p.useState)(void 0),{mutate:L}=(0,s.w)(!0),{ready:E,data:F,sendTransaction:O,isError:_,isPending:D,isSuccess:N}=(0,ep.i)(j);return(0,p.useEffect)(()=>{if(F&&N){v("Your limit order set up request has been sent.","completed",void 0,{hash:F});let e=(e,i,o)=>{(0,d.jWs)({status:"completed",info:"Setting up limit order in progress.",currentTheme:y}),(0,c.$y)(e,i,o).then(e=>{v("You have successfully set up an ".concat(t.ticker,"-").concat(n.ticker," limit order."),"completed"),L()}).catch(e=>{v((0,c.cr)(e),"failed")})};w(ed,{disableBackgroundOnClose:!0,closeIcon:!1,txdata:P,txHash:null!=F?F:void 0,tokenPair:"".concat(t.ticker,"-").concat(n.ticker),gasCeiling:a,createTrigger:e,deadlineInDays:u,onclose:()=>{T(),f()}})}},[N]),(0,p.useEffect)(()=>{_&&v("Failed: "+S,"failed")},[_]),(0,p.useEffect)(()=>{(0,ef._)(x,h,m,n,t,i,l,k).then(e=>{let{tx:n,outerLimitPrice:t,inputCurrencyAmount:i}=e;k.estimateGas({...n,account:m}).then(e=>{C({...n,gas:(0,H.yC)(e)}),I({outerLimitPrice:t,inputCurrencyAmount:i})}).catch(e=>{(0,el.getLogger)().error("Failed to estimate gas on CreatePositionTxForLimitOrder: ",{error:JSON.stringify(e.message)}),Z(e.details)})}).catch(e=>{Z(e.toString()),(0,el.getLogger)().error("Failed to getTransactionForLimitOrder: ",{ammEnum:x,networkId:h,address:m,sellToken:n,buyToken:t,feeTier:i,rangeWidth:l,error:JSON.stringify(e)})})},[n,t,i]),(0,o.jsx)(eg,{onClick:()=>{null==O||O()},variant:"contained",color:"primary",size:"lg",invalid:!1,disabled:!j||!E||D||S||D||N,width:"100%",children:S||(_?"Execution Reverted":D?(0,o.jsx)(d.$jN,{}):"Confirm Limit Order")})};function eh(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 12px;\n  gap: ",";\n"]);return eh=function(){return e},e}function ek(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n"]);return ek=function(){return e},e}function ev(){let e=(0,i.Z)(["\n  font-weight: 500;\n  color: ",";\n"]);return ev=function(){return e},e}function eb(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n"]);return eb=function(){return e},e}function ey(){let e=(0,i.Z)(["\n  position: relative;\n  height: 37px;\n"]);return ey=function(){return e},e}function ew(){let e=(0,i.Z)(["\n  position: absolute;\n  right: 0;\n"]);return ew=function(){return e},e}function eT(){let e=(0,i.Z)(["\n  height: 1px;\n  width: 100%;\n  background: ",";\n  margin: 8px 0;\n"]);return eT=function(){return e},e}function ej(){let e=(0,i.Z)(["\n  font-size: 12px;\n  line-height: 12px;\n  color: ",";\n  width: 100%;\n  text-align: right;\n  margin-top: -4px;\n"]);return ej=function(){return e},e}let eC=m.ZP.div.withConfig({componentId:"sc-4bf95c6-0"})(eh(),e=>{let{theme:n}=e;return n.spacing.xl}),eP=m.ZP.div.withConfig({componentId:"sc-4bf95c6-1"})(ek(),e=>{let{theme:n}=e;return n.spacing.md}),eI=(0,m.ZP)(d.mI).withConfig({componentId:"sc-4bf95c6-2"})(ev(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),eS=m.ZP.div.withConfig({componentId:"sc-4bf95c6-3"})(eb(),e=>{let{theme:n}=e;return n.spacing.sm2}),eZ=m.ZP.div.withConfig({componentId:"sc-4bf95c6-4"})(ey()),eL=(0,m.ZP)(d.EzS).withConfig({componentId:"sc-4bf95c6-5"})(ew()),eE=m.ZP.div.withConfig({componentId:"sc-4bf95c6-6"})(eT(),e=>{let{theme:n}=e;return n.colors.global.line.Line2}),eF=m.ZP.div.withConfig({componentId:"sc-4bf95c6-7"})(ej(),e=>{let{theme:n}=e;return n.colors.global.text.T2}),eO=e=>{var n,t,i;let{form:l,sellToken:c,buyToken:a,feeTier:s,rangeWidth:u,feeRevenue:f,gasCeiling:m,onTitleClick:g}=e,{ammEnum:x}=(0,r.L)(),[h,k]=(0,p.useState)("Sell"),v="Buy"===h,b=q().tz.guess(),y=new Date().getTime()+864e5*l.deadline;return(0,W.o)(()=>{g()}),(0,o.jsxs)(eC,{children:[(0,o.jsx)(d.iIr,{onClick:g,isDrawer:!0,children:(0,o.jsx)(d.OuF,{fontWeight:500,children:"Preview Limit Order"})}),(0,o.jsxs)(d.tuJ,{gap:"md",children:[(0,o.jsxs)(eP,{children:[(0,o.jsx)(eI,{children:"You Sell"}),(0,o.jsx)(d.H3J,{...c})]}),(0,o.jsxs)(eP,{children:[(0,o.jsx)(eI,{children:"You Buy"}),(0,o.jsx)(d.H3J,{...a})]})]}),(0,o.jsx)(eZ,{children:(0,o.jsx)(eL,{width:140,menu:[a.ticker,c.ticker],defaultSelected:[a.ticker,c.ticker].indexOf(a.ticker),onSelect:e=>k(a.ticker===e?"Buy":"Sell")})}),(0,o.jsxs)(eS,{children:[(0,o.jsx)(d.rJ_,{title:"".concat(h," ").concat(v?a.ticker:c.ticker," Price"),content:"".concat((0,T.LH)(G().divide(v?c.amount:a.amount,v?a.amount:c.amount,18))," ").concat(v?c.ticker:a.ticker)}),(0,o.jsx)(d.rJ_,{title:"".concat(v?a.ticker:c.ticker," Market Price"),content:"".concat((0,T.LH)(v?l.marketPrice.buy:l.marketPrice.sell)," ").concat(v?c.ticker:a.ticker)}),(0,o.jsx)(d.rJ_,{title:"Min. Trigger Price",content:"".concat(v?(0,T.LH)(l.buy.minPrice):(0,T.LH)(l.sell.maxPrice)," ").concat(v?c.ticker:a.ticker)}),(0,o.jsx)(d.rJ_,{title:"Underlying Range",content:"".concat((0,T.LH)(v?l.buy.minPrice:l.sell.minPrice)," - ").concat((0,T.LH)(v?l.buy.maxPrice:l.sell.maxPrice)," ").concat(v?c.ticker:a.ticker)}),(0,o.jsx)(eE,{}),(0,o.jsx)(d.rJ_,{title:"LP Fee Tier",content:"".concat(s/1e4,"%"),hint:"Default fee tier is set to ".concat(H.EY[x]/1e4,"%.")}),(0,o.jsx)(d.rJ_,{title:"Min. Fee Revenue To Earn",content:"".concat((0,T.LH)(f)," ").concat(c.ticker)}),(0,o.jsx)(d.rJ_,{title:"Gas Ceiling",content:"".concat(m,"% of Limit Order (").concat((0,T.oS)(l.gasInDollar),")")}),(0,o.jsx)(d.rJ_,{title:"Expiration Date",content:"".concat(V()(y).format("MMM Do, YYYY")," (").concat(V()(y).diff(V()(),"days")," Days)")}),(0,o.jsx)(eF,{children:"".concat(b," (GMT").concat(q().tz(b).format("Z"),")")}),(0,o.jsx)(d.oLF,{styles:{size:"md"},amm:x,feeInfo:{fee:H.mH,amount:(null===(n=l.sell.token)||void 0===n?void 0:n.price)&&(null===(t=l.sell.token)||void 0===t?void 0:t.price)!=="-"?G().multiply(l.sell.value,null===(i=l.sell.token)||void 0===i?void 0:i.price):"-"},hint:"".concat(100*H.mH,"% of the order size.")})]}),(0,o.jsx)(ex,{sellToken:c,buyToken:a,feeTier:s,rangeWidth:u,gasCeiling:m,deadlineInDays:l.deadline,goBack:g})]})};var e_=t(89192),eD=t(10661),eN=t(60152),eA=t(47521),eM=t(48747),ez=t(47574),eR=t(80335),eB=t(5685),eY=t(9485),eH=t(5112);function eU(){let e=(0,i.Z)(["\n  color: ",';\n  font-family: "Dunbar Tall";\n  font-weight: 500;\n  text-transform: capitalize;\n']);return eU=function(){return e},e}function eG(){let e=(0,i.Z)(["\n  width: 420px;\n  margin-top: 12px;\n  color: ",";\n"]);return eG=function(){return e},e}function eW(){let e=(0,i.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 40px;\n  height: 40px;\n  padding: 2px;\n  cursor: pointer;\n  border-radius: ",";\n  background: ",";\n  border: 0;\n  position: absolute;\n  top: 112px;\n"]);return eW=function(){return e},e}function eJ(){let e=(0,i.Z)(["\n  fill: ",";\n  transition: transform "," ease;\n"]);return eJ=function(){return e},e}function eV(){let e=(0,i.Z)(["\n  height: 16px;\n"]);return eV=function(){return e},e}function e$(){let e=(0,i.Z)(["\n  height: 8px;\n"]);return e$=function(){return e},e}function eq(){let e=(0,i.Z)(["\n  display: flex;\n  gap: ",";\n"]);return eq=function(){return e},e}function eK(){let e=(0,i.Z)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return eK=function(){return e},e}function eX(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n  gap: ",";\n"]);return eX=function(){return e},e}function eQ(){let e=(0,i.Z)(["\n  margin: ",";\n"]);return eQ=function(){return e},e}let e0=(0,m.ZP)(d.iHY).withConfig({componentId:"sc-8bb1fdc9-0"})(eU(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),e1=m.ZP.div.withConfig({componentId:"sc-8bb1fdc9-1"})(eG(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),e2=m.ZP.button.withConfig({componentId:"sc-8bb1fdc9-2"})(eW(),e=>{let{theme:n}=e;return n.radii.round},e=>{let{theme:n}=e;return n.colors.global.primary}),e8=(0,m.ZP)(x.l7).withConfig({componentId:"sc-8bb1fdc9-3"})(eJ(),e=>{let{theme:n}=e;return n.colors.global.textAlt.T1},e=>{let{theme:n}=e;return n.transitions.default}),e5=m.ZP.div.withConfig({componentId:"sc-8bb1fdc9-4"})(eV()),e9=m.ZP.div.withConfig({componentId:"sc-8bb1fdc9-5"})(e$());m.ZP.div.withConfig({componentId:"sc-8bb1fdc9-6"})(eq(),e=>{let{theme:n}=e;return n.spacing.sm}),(0,m.ZP)(d.TjN).withConfig({componentId:"sc-8bb1fdc9-7"})(eK());let e6=m.ZP.div.withConfig({componentId:"sc-8bb1fdc9-8"})(eX(),e=>{let{theme:n}=e;return n.spacing.lg}),e4=(0,m.ZP)(d.VOW).withConfig({componentId:"sc-8bb1fdc9-9"})(eQ(),e=>{let{theme:n}=e;return"".concat(n.spacing["2xl"]," 0")}),e7=e=>{var n,t,i,l;let{onConfirm:c}=e,{isConnected:s,address:u}=(0,g.m)(),{ammEnum:f,networkId:m,publicClient:x,isChainSupported:h}=(0,r.L)(),{data:k,isLoading:v}=(0,ez.GB)(),{mutateWarningTokens:b}=(0,a.q)(),{state:y,setModalState:w}=(0,eB.dd)(),{isOpen:j}=y[eB.yI.TOKEN_SELECT_MODAL],[C,P]=(0,p.useState)(),{isOpen:I}=y[eB.yI.TOKEN_WARNING_MODAL],[S,Z]=(0,p.useState)(),[L,E]=(0,p.useState)(!0),[F,O]=(0,p.useState)(null),[_,D]=(0,p.useState)(null),[N,A]=(0,p.useState)(null),[M,z]=(0,p.useState)(null),[R,B]=(0,p.useState)(""),[Y,U]=(0,p.useState)("buy"),[W,J]=(0,p.useState)(!1),[V,$]=(0,p.useState)(void 0),[q,K]=(0,p.useState)(1),X=(0,p.useMemo)(()=>G().multiply(null!=N?N:"0",(null==F?void 0:F.price)&&(null==F?void 0:F.price)!=="-"?F.price:"0"),[N,F]),[Q,ee]=(0,p.useState)((0,H.yX)(m,X)),[en,et]=(0,p.useState)(!1),[ei,eo]=(0,p.useState)(""),[er,ec]=(0,p.useState)(null),[ea,es]=(0,p.useState)(null),[eu,ed]=(0,p.useState)(["sell","buy","price"]),[ef,ep]=(0,p.useState)(""),[em,eg]=(0,p.useState)(!1),[ex,eh]=(0,p.useState)(null),ek=F&&_?F.address.toLowerCase()<_.address.toLowerCase():null,{data:ev,isLoading:eb}=(0,eM.m)(ek?null==F?void 0:F.address:null==_?void 0:_.address,ek?null==_?void 0:_.address:null==F?void 0:F.address,[],!!F&&!!_),ey=(0,p.useMemo)(()=>{let e=new Set;return d.Npi[f].map(n=>{ev&&ev[n]&&e.add(n)}),e},[ev]),ew=(0,p.useMemo)(()=>Object.values(null!=k?k:{}).sort((e,n)=>G().compareTo(n.amount,e.amount)),[k]);(0,p.useEffect)(()=>{E(!0),O(null),D(null),A(null),z(null),B(""),U("buy"),J(!1),ee(0),et(!1),eo(""),ec(null),es(null),ed(["sell","buy","price"]),ep(""),eg(!1)},[m]);let eT=V?eY.TICK_SPACINGS[V]:0;(0,p.useEffect)(()=>{F&&_&&!eb?(null==ey?void 0:ey.size)?ey.has(V)&&(et(!1),el.viem.getPool(F.address,_.address,V,m,f,x).then(e=>{ec(e);let n=(0,el.tickToLimitOrderRange)((0,eA.pj)(null,ek?"Increment":"Decrement",eT,e,q),e.fee,q).tickAvg;es(n),eh(null)}).catch(e=>{eh("No pools found for this token pair")})):et(!0):(et(!1),ec(null),es(null))},[F,_,V,q,eb]);let ej=()=>{let e=(0,eY.tickToPrice)(er.token0,er.token1,ea);ek&&"buy"===Y||!ek&&"sell"===Y?B((0,T._V)(e.toFixed(18))):B((0,T._V)(e.invert().toFixed(18))),N&&M&&("sell"===eu[0]||"price"===eu[0]&&"sell"===eu[1]?A((0,T._V)(G().multiply(M,ek?e.invert().toFixed(18):e.toFixed(18)))):z((0,T._V)(G().multiply(ek?e.toFixed(18):e.invert().toFixed(18),N))))};(0,p.useEffect)(()=>{er&&ea&&ej()},[ea]),(0,p.useEffect)(()=>{s&&h?E(!1):E(!0)},[s,h]),(0,p.useEffect)(()=>{F&&N&&ee((0,H.yX)(m,X))},[F,N]);let eC=()=>{eo(""),O(_),D(F),A(M),z(N);let e=eu.findIndex(e=>"buy"===e),n=eu.findIndex(e=>"sell"===e);eu[e]="sell",eu[n]="buy",ed(eu)};(0,p.useEffect)(()=>{F&&F.native&&J(!0)},[F]),(0,p.useEffect)(()=>{var e;F?N?G().compareTo(null!=N?N:"0",null!==(e=null==F?void 0:F.amount)&&void 0!==e?e:"0")>0?eo("Insufficient ".concat(null==F?void 0:F.ticker," Balance")):eo((0,H.le)(m,Q,X)):eo("Enter Sell Amount"):eo("Select Sell Token")},[F,N,Q]);let eP=()=>{let e=(0,eY.tickToPrice)(er.token0,er.token1,er.tickCurrent),n=(0,el.tickToLimitOrderRange)(ea,er.fee,q),t={sell:{value:N||"0",token:F||null,minPrice:ek?(0,eY.tickToPrice)(er.token0,er.token1,n.tickLower).toFixed(18):(0,eY.tickToPrice)(er.token0,er.token1,n.tickUpper).invert().toFixed(18),maxPrice:ek?(0,eY.tickToPrice)(er.token0,er.token1,n.tickUpper).toFixed(18):(0,eY.tickToPrice)(er.token0,er.token1,n.tickLower).invert().toFixed(18)},buy:{value:M||"0",token:_||null,minPrice:ek?(0,eY.tickToPrice)(er.token0,er.token1,n.tickUpper).invert().toFixed(18):(0,eY.tickToPrice)(er.token0,er.token1,n.tickLower).toFixed(18),maxPrice:ek?(0,eY.tickToPrice)(er.token0,er.token1,n.tickLower).invert().toFixed(18):(0,eY.tickToPrice)(er.token0,er.token1,n.tickUpper).toFixed(18)},marketPrice:{sell:ek?e.toFixed(18):e.invert().toFixed(18),buy:ek?e.invert().toFixed(18):e.toFixed(18)},feeTier:V,rangeWidth:q,gasCeiling:Q,gasInDollar:G().multiply(X,Q),deadline:0===Number(ef.replace(" Days",""))?30:Number(ef.replace(" Days",""))};(0,el.getLogger)().debug("InvariantFailed",t),c(t)},eI=e=>{let n=[...eu],t=n.indexOf(e);-1!==t&&(n.splice(t,1),n.push(e),ed(n))};(0,p.useEffect)(()=>{F&&!v&&k&&k["".concat(F.address,"-").concat(F.native)]&&O(k["".concat(F.address,"-").concat(F.native)]),_&&!v&&k&&k["".concat(_.address,"-").concat(_.native)]&&D(k["".concat(_.address,"-").concat(_.native)])},[s,v,k]);let eS=e=>{if(eI("price"),F&&_&&er){let n;n=ek&&"buy"===Y||!ek&&"sell"===Y?(0,el.tickToLimitOrderRange)((0,eA.pj)(ea,"minus"===e?"Decrement":"Increment",eT,er),er.fee,q):(0,el.tickToLimitOrderRange)((0,eA.pj)(ea,"minus"===e?"Increment":"Decrement",eT,er),er.fee,q),(ek&&n.tickLower>er.tickCurrent||!ek&&n.tickUpper<er.tickCurrent)&&es(n.tickAvg)}},eZ=ea&&V&&(0,el.tickToLimitOrderRange)(ea,V,q),eL=async e=>await (0,ez.lp)(e,m,x,s,u),eE=async(e,n)=>{n?((0,H.TD)(e,_)&&D(null),!F&&_&&0!==G().compareTo(M,"0")&&A("0"),O(e)):((0,H.TD)(e,F)&&O(null),!_&&F&&0!==G().compareTo(N,"0")&&z("0"),D(e)),eF(!1)},eF=e=>{w(eB.yI.TOKEN_SELECT_MODAL,e)},eO=e=>{w(eB.yI.TOKEN_WARNING_MODAL,e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e1,{children:[(0,o.jsxs)(eR.nw,{children:[(0,o.jsx)(d.iot,{title:"Sell",token:F,price:null!==(n=null==F?void 0:F.price)&&void 0!==n?n:"",value:N,showMax:!0,showBalance:s,openTokenSelectModal:()=>{P(!0),eF(!0)},onValueChange:e=>{if(eI("sell"),A(e),_&&er){let n=(0,eY.tickToPrice)(ek?er.token0:er.token1,ek?er.token1:er.token0,ea);if(M&&"buy"!==eu[0]&&0!==Number(M)&&0!==Number(e)){let t=0===G().compareTo(e,0)?"0":G().divide(M,e,18),i=(0,el.parsePrice)(ek?er.token0:er.token1,ek?er.token1:er.token0,t),o=(0,el.tickToLimitOrderRange)((0,el.priceToClosestTickSafe)(i),er.fee,q);if(o.tickAvg!==ea&&(ek&&o.tickLower>er.tickCurrent||!ek&&o.tickUpper<er.tickCurrent))es(o.tickAvg);else{let t=(0,T._V)(G().multiply(e,n.toFixed(18)));z(t)}}else{let t=(0,T._V)(G().multiply(e,n.toFixed(18)));z(t)}}},size:"small",decimalScale:null==F?void 0:F.decimals}),(0,o.jsx)(e9,{}),(0,o.jsx)(e2,{onClick:eC,children:(0,o.jsx)(e8,{})}),(0,o.jsx)(d.iot,{title:"Buy",token:_,price:null!==(t=null==_?void 0:_.price)&&void 0!==t?t:"",value:M,showMax:!1,showBalance:s,openTokenSelectModal:()=>{P(!1),eF(!0)},onValueChange:e=>{if(eI("buy"),z(e),F&&er){let n=(0,eY.tickToPrice)(ek?er.token1:er.token0,ek?er.token0:er.token1,ea);if(N&&"sell"!==eu[0]&&0!==Number(N)&&0!==Number(e)){let t=G().divide(e,N,18),i=(0,el.parsePrice)(ek?er.token0:er.token1,ek?er.token1:er.token0,t),o=(0,el.tickToLimitOrderRange)((0,el.priceToClosestTickSafe)(i),er.fee,q);if(o.tickAvg!==ea&&(ek&&o.tickLower>er.tickCurrent||!ek&&o.tickUpper<er.tickCurrent))es(o.tickAvg);else{let t=(0,T._V)(G().multiply(e,n.toFixed(18)));A(t)}}else{let t=(0,T._V)(G().multiply(e,n.toFixed(18)));A(t)}}},size:"small",decimalScale:null==_?void 0:_.decimals})]}),(0,o.jsx)(e5,{}),(0,o.jsx)(d.CDN,{onCloseToMarketClick:()=>{if(er){eI("price");let e=(0,el.tickToLimitOrderRange)((0,eA.pj)(null,ek?"Increment":"Decrement",eT,er,q),er.fee,q).tickAvg;es(e)}},onMinusClick:()=>eS("minus"),onPlusClick:()=>eS("plus"),sellTicker:null!==(i=null==F?void 0:F.ticker)&&void 0!==i?i:"-",buyTicker:null!==(l=null==_?void 0:_.ticker)&&void 0!==l?l:"-",disabled:!F||!_||!er,value:R,onChange:e=>B(e),onBlur:e=>{eI("price");let n=(0,el.parsePrice)(ek?er.token0:er.token1,ek?er.token1:er.token0,"buy"===Y||0===G().compareTo(e,0)?e:G().divide("1",e,18)),t=(0,el.tickToLimitOrderRange)((0,el.priceToClosestTickSafe)(n),V,q);t.tickAvg!==ea&&(ek&&t.tickLower>er.tickCurrent||!ek&&t.tickUpper<er.tickCurrent)?es(t.tickAvg):ej()},action:Y,setAction:e=>{U(e),0!==G().compareTo(R,"0")&&B(G().divide("1",R,18))},marketPrice:(()=>{if(!F||!_||!er)return{sell:"0",buy:"0"};{let e=(0,eY.tickToPrice)(er.token0,er.token1,er.tickCurrent);return{sell:(0,T.LH)(ek?e.toFixed(18):e.invert().toFixed(18)),buy:(0,T.LH)(ek?e.invert().toFixed(18):e.toFixed(18))}}})()}),(0,o.jsx)(d.K3S,{amm:f,sellToken:F,sellAmount:N,feeTier:V,defaultFeeTier:H.EY[f],defaultRevenue:H.Fh,supportedFeeTier:ey,onFeeTierChange:e=>$(e),rangeWidth:q,onRangeWidthChange:e=>K(e),gasCeilingAmount:G().multiply(null!=N?N:"0",(null==F?void 0:F.price)&&(null==F?void 0:F.price)!=="-"?F.price:"0"),gasCeilingPercentage:Q,onGasCeilingChange:e=>ee(e),onGasCeilingError:F?e=>(0,H.ob)(m,e,X):void 0,expireDays:ef,maxExpireDays:el.AUTOMATION_EXPIRATION_IN_DAYS,expireDaysOnError:em,onExpireInput:e=>{0===Number(e)?ep(""):ep(e+" Days"),Number(e)>el.AUTOMATION_EXPIRATION_IN_DAYS?eg(!0):eg(!1)}}),en&&(0,o.jsx)(d.P_k,{variant:"error",text:"Token pair is not supported",style:{marginTop:"8px"}}),ex&&F&&_&&!en&&(0,o.jsx)(d.P_k,{variant:"error",text:ex,style:{marginTop:"8px"}}),(0,o.jsxs)(e6,{children:[(0,o.jsx)(e_.B,{token:F,contractAddress:(0,el.getChainInfo)(m).amms[f].nonfungiblePositionManager,amount:null!=N?N:"0",approveOnChange:e=>J(e),useNative:null==F?void 0:F.native}),(0,o.jsx)(d.zxk,{variant:"contained",color:"secondary",size:"lg",width:"100%",onClick:eP,disabled:em||!!ei||L||!_||0>=Number(M)||!F||0>=Number(N)||!W||en,children:ei||"Place Limit Order"})]}),(0,o.jsx)("br",{}),!(0,H.H0)()&&(0,o.jsxs)(o.Fragment,{children:["tick:"," ",eZ&&(0,o.jsxs)(o.Fragment,{children:[eZ.tickLower," ",eZ.tickAvg," ",eZ.tickUpper]})," ",(0,o.jsx)("br",{}),"pool current tick: ",null==er?void 0:er.tickCurrent," ",(0,o.jsx)("br",{}),"if sell token 0: ",String(ek)," ",(0,o.jsx)("br",{}),"priorityList: ",String(eu)]})]}),(0,o.jsx)(eB.u_,{isModalOpen:j,onClose:()=>eF(!1),padding:20,children:(0,o.jsx)(eD.t,{commonTokens:ew,selectedToken:C?F:_,selectToken:e=>eE(e,C),selectUnknownToken:e=>{Z({token:e,isSell:C}),eO(!0)},handleUnknownAddress:eL})}),(0,o.jsx)(eB.u_,{isModalOpen:I,onClose:()=>eO(!1),closeIcon:!1,children:(0,o.jsx)(d.fj1,{amm:f,token:null==S?void 0:S.token,exploreURL:(0,eN.DI)(m),confirmClick:e=>{eE(e,null==S?void 0:S.isSell),b(m,new eH.Token(m,e.address,e.decimals,e.ticker,e.name)),eO(!1)},cancelClick:()=>eO(!1)})})]})},e3=()=>{let{amm:e,ammEnum:n,network:t}=(0,r.L)(),[i,l]=(0,p.useState)(!1),[c,a]=(0,p.useState)(null),[s,d]=(0,p.useState)({Icon:(0,o.jsx)(x.kd,{width:28,height:28}),ticker:"ticker",name:"name",amount:"0",subText:"~$0",address:"0x",native:!0}),[f,m]=(0,p.useState)({Icon:(0,o.jsx)(x.kd,{width:28,height:28}),ticker:"ticker",name:"name",amount:"0",subText:"~$0",address:"0x",native:!1}),[g,h]=(0,p.useState)(H.EY[n]),[k,v]=(0,p.useState)(1),[b,y]=(0,p.useState)(H.wO),w=e=>{var n,t,i,o;d({Icon:e.sell.token.Icon,ticker:e.sell.token.ticker,name:null!==(n=e.sell.token.name)&&void 0!==n?n:e.sell.token.ticker,amount:e.sell.value,subText:(0,T.oS)(G().multiply(e.sell.value,null!==(t=e.sell.token.price)&&void 0!==t?t:"0")),address:e.sell.token.address,native:e.sell.token.native}),m({Icon:e.buy.token.Icon,ticker:e.buy.token.ticker,name:null!==(i=e.buy.token.name)&&void 0!==i?i:e.buy.token.ticker,amount:e.buy.value,subText:(0,T.oS)(G().multiply(e.buy.value,null!==(o=e.buy.token.price)&&void 0!==o?o:"0")),address:e.buy.token.address,native:e.buy.token.native}),h(e.feeTier),v(e.rangeWidth),y(e.gasCeiling),a(e),l(!0)};return(0,o.jsxs)("div",{children:[(0,o.jsxs)(e0,{children:["Revenue Earning ",(0,o.jsx)("br",{})," Limit Order",(0,o.jsx)(e4,{amm:e,chainId:t})]}),(0,o.jsx)(u.s0,{children:"Place Orders"}),(0,o.jsx)("div",{children:i?(0,o.jsx)(eO,{form:c,sellToken:s,buyToken:f,feeTier:g,rangeWidth:k,feeRevenue:G().multiply(s.amount,H.Fh),gasCeiling:G().multiply(b,100),onTitleClick:()=>l(!1)}):(0,o.jsx)(e7,{onConfirm:w})})]})};function ne(){let e=(0,i.Z)(["\n  display: grid;\n  grid-template-columns: 420px 40px 629px;\n"]);return ne=function(){return e},e}let nn=m.ZP.div.withConfig({componentId:"sc-12447924-0"})(ne());function nt(){let{network:e,setNetwork:n,ammEnum:t}=(0,r.L)(),{isConnected:i}=(0,g.m)(),c=(0,l.TN)(e)||"SLIPSTREAM"===t;return(0,p.useEffect)(()=>{!i&&c&&n(l.Rr,l.Kc)},[]),(0,o.jsx)(u._z,{children:c?(0,o.jsx)(u.cs,{children:(0,o.jsx)(d.Bpc,{children:"Coming Soon!"})}):(0,o.jsxs)(nn,{children:[(0,o.jsx)(e3,{}),(0,o.jsx)("div",{}),(0,o.jsx)(Y,{})]})})}},80335:function(e,n,t){"use strict";t.d(n,{LB:function(){return j},M7:function(){return y},VW:function(){return T},W2:function(){return v},W4:function(){return P},h4:function(){return b},jN:function(){return C},nM:function(){return S},nw:function(){return w},uH:function(){return I}});var i=t(92228),o=t(17625),r=t(69987),l=t(58694);function c(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n  gap: ",";\n"]);return c=function(){return e},e}function a(){let e=(0,i.Z)(["\n  color: ",";\n  margin-bottom: 16px;\n  span:first-child {\n    margin-right: 4px;\n  }\n"]);return a=function(){return e},e}function s(){let e=(0,i.Z)(["\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return s=function(){return e},e}function u(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: ",";\n"]);return u=function(){return e},e}function d(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  border-radius: ",";\n  gap: ",";\n  position: relative;\n  overflow: auto;\n"]);return d=function(){return e},e}function f(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  gap: ","px;\n  position: relative;\n"]);return f=function(){return e},e}function p(){let e=(0,i.Z)(["\n  width: 100%;\n"]);return p=function(){return e},e}function m(){let e=(0,i.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 48px;\n  height: 48px;\n  cursor: ",";\n  border-radius: ",";\n  background: ",";\n  border: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateY(-50%) translateX(-50%);\n"]);return m=function(){return e},e}function g(){let e=(0,i.Z)(["\n  transform: rotate(0deg);\n  transition: transform "," ease;\n  fill: ",";\n"]);return g=function(){return e},e}function x(){let e=(0,i.Z)(["\n  display: flex;\n  width: 100%;\n\n  > div {\n    width: 100%;\n  }\n"]);return x=function(){return e},e}function h(){let e=(0,i.Z)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  padding: 2px 0;\n"]);return h=function(){return e},e}function k(){let e=(0,i.Z)(["\n  border: 1px solid ",";\n"]);return k=function(){return e},e}let v=l.ZP.div.withConfig({componentId:"sc-59a2f87f-0"})(c(),e=>{let{theme:n}=e;return n.spacing["3xl"]});(0,l.ZP)(r.Bpc).withConfig({componentId:"sc-59a2f87f-1"})(a(),e=>{let{theme:n}=e;return n.colors.grey.darkGrey2});let b=l.ZP.div.withConfig({componentId:"sc-59a2f87f-2"})(s());l.ZP.div.withConfig({componentId:"sc-59a2f87f-3"})(u(),e=>{let{theme:n}=e;return n.spacing.xl});let y=l.ZP.div.withConfig({componentId:"sc-59a2f87f-4"})(d(),e=>{let{theme:n}=e;return n.radii.md},e=>{let{theme:n}=e;return n.spacing["2xl"]}),w=l.ZP.div.withConfig({componentId:"sc-59a2f87f-5"})(f(),e=>{let{gap:n}=e;return n||0}),T=l.ZP.div.withConfig({componentId:"sc-59a2f87f-6"})(p()),j=l.ZP.button.withConfig({componentId:"sc-59a2f87f-7"})(m(),e=>{let{disabled:n}=e;return n?"default":"pointer"},e=>{let{theme:n}=e;return n.radii.round},e=>{let{theme:n}=e;return n.colors.global.primary}),C=(0,l.ZP)(o.l7).withConfig({componentId:"sc-59a2f87f-8"})(g(),e=>{let{theme:n}=e;return n.transitions.default},e=>{let{theme:n}=e;return n.colors.global.textAlt.T1}),P=l.ZP.div.withConfig({componentId:"sc-59a2f87f-9"})(x()),I=l.ZP.div.withConfig({componentId:"sc-59a2f87f-10"})(h()),S=l.ZP.div.withConfig({componentId:"sc-59a2f87f-11"})(k(),e=>{let{theme:n}=e;return n.colors.global.line.Line1})},22980:function(e,n,t){"use strict";t.d(n,{l:function(){return l}});var i=t(14503),o=t(8998),r=t(92106);async function l(e,{account:n=e.account,message:t}){if(!n)throw new o.o({docsPath:"/docs/actions/wallet/signMessage"});let l=(0,i.T)(n);if("local"===l.type)return l.signMessage({message:t});let c="string"==typeof t?(0,r.$G)(t):t.raw instanceof Uint8Array?(0,r.NC)(t.raw):t.raw;return e.request({method:"personal_sign",params:[c,l.address]},{retryCount:0})}},20679:function(e,n,t){"use strict";t.d(n,{x:function(){return a}});var i=t(14503),o=t(8998),r=t(15102),l=t(96070),c=t(71352);async function a(e,n){let{account:t=e.account,domain:a,message:s,primaryType:u}=n;if(!t)throw new o.o({docsPath:"/docs/actions/wallet/signTypedData"});let d=(0,i.T)(t),f={EIP712Domain:(0,c.cj)({domain:a}),...n.types};if((0,c.iC)({domain:a,message:s,primaryType:u,types:f}),"local"===d.type)return d.signTypedData({domain:a,message:s,primaryType:u,types:f});let p=(0,l.P)({domain:a??{},message:s,primaryType:u,types:f},(e,n)=>(0,r.v)(n)?n.toLowerCase():n);return e.request({method:"eth_signTypedData_v4",params:[d.address,p]},{retryCount:0})}}},function(e){e.O(0,[9458,2089,7183,2888,179],function(){return e(e.s=22359)}),_N_E=e.O()}]);
//# sourceMappingURL=limit-orders-db129c020e6d850e.js.map