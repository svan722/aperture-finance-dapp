"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2089],{84401:function(e,n,t){t.d(n,{Ll:function(){return u},OK:function(){return c},fQ:function(){return i},r7:function(){return r}});var o=t(28388);let i=e=>Math.floor(new Date().setDate(new Date().getDate()+e)/1e3),r=()=>i(o.AUTOMATION_EXPIRATION_IN_DAYS),u=()=>i(o.AUTOMATION_EXPIRATION_IN_DAYS),c=e=>Math.floor(new Date().setMinutes(new Date().getMinutes()+e)/1e3)},68123:function(e,n,t){t.d(n,{S:function(){return l},_:function(){return a}});var o=t(69987),i=t(28388),r=t(44850),u=t.n(r),c=t(76793);async function a(e,n,t,o,r,c,a,l){let[d,s]=await Promise.all([i.viem.getToken(o.address,n,l),i.viem.getToken(r.address,n,l)]),m=(0,i.parsePrice)(d,s,u().divide(r.amount,o.amount,18)),p=i.viem.getCurrencyAmount(o.native?i.viem.getNativeCurrency(n):d,u().round(o.amount,d.decimals,u().RoundingModes.DOWN)),f=BigInt(Math.floor(new Date().getTime()/1e3)+1800),g=await i.viem.getCreatePositionTxForLimitOrder(t,m,p,c,f,n,e,l,a);return{tx:g,outerLimitPrice:m,inputCurrencyAmount:p}}function l(e,n){switch(e){case c.ht.CREATED:case c.ht.STARTED:return n?o.iFo.ACTIVE:o.iFo.UNAUTHORIZED;case c.ht.COMPLETED:return o.iFo.FULFILLED;case c.ht.DELETED:return o.iFo.CANCELED;case c.ht.INVALID:return o.iFo.FAILED;default:o.iFo.ACTIVE}}},41378:function(e,n,t){t.d(n,{A:function(){return p},b:function(){return m}});var o=t(47314),i=t(48803),r=t(20973),u=t(28388),c=t(9485),a=t(44850),l=t.n(a),d=t(89011),s=t(69987);let m=(e,n,t,a)=>e?Object.entries(e).map(e=>{var d,s,m,p,f,g;let[v,k]=e,I=null==n?void 0:n[k.pool.token0.address],w=null==n?void 0:n[k.pool.token1.address];if(!I||!w)return null;let A=(0,c.tickToPrice)(I,w,k.tickLower).toFixed(18),T=(0,c.tickToPrice)(I,w,k.tickUpper).toFixed(18),h=(0,r.on)(I),y=(0,r.on)(w),P={...h,amount:k.position.amount0.toExact(),collectableAmount:k.tokensOwed0.toExact(),address:k.token0.address,Icon:(0,o.Y)(h.address,h.ticker,t),ratio:.5,price:(0,u.fractionToBig)(k.pool.token0Price).toString(),getTokenValueProportion:()=>(0,u.getTokenValueProportionFromPriceRatio)(k.tickLower,k.tickUpper,(0,u.fractionToBig)(k.pool.token0Price))},b={...y,amount:k.position.amount1.toExact(),collectableAmount:k.tokensOwed1.toExact(),address:k.token1.address,Icon:(0,o.Y)(y.address,y.ticker,t),ratio:.5,price:(0,u.fractionToBig)(k.pool.token1Price).toString(),getTokenValueProportion:()=>(0,u.getTokenValueProportionFromPriceRatio)(k.tickLower,k.tickUpper,(0,u.fractionToBig)(k.pool.token1Price))},C=(0,r.zu)(P.amount,b.amount,(null==a?void 0:null===(d=a[P.address])||void 0===d?void 0:d.price)||"0",(null==a?void 0:null===(s=a[b.address])||void 0===s?void 0:s.price)||"0");return{positionIdBN:BigInt(v),positionId:v,chainId:k.chainId,tokenA:P,tokenB:b,liquidity:(0,i.bp)(P.amount,b.amount,null==a?void 0:null===(m=a[P.address])||void 0===m?void 0:m.price,null==a?void 0:null===(p=a[b.address])||void 0===p?void 0:p.price),feeAmount:(0,i.bp)(P.collectableAmount,b.collectableAmount,null==a?void 0:null===(f=a[P.address])||void 0===f?void 0:f.price,null==a?void 0:null===(g=a[b.address])||void 0===g?void 0:g.price),feeTier:k.fee,tickSpacing:k.tickSpacing,tickLower:k.tickLower,tickUpper:k.tickUpper,minPrice:A,maxPrice:T,inRange:u.viem.isPositionInRange(k.position),closed:0===l().compareTo(k.liquidity,0),positionDataRaw:k.position,tokenPercentages:C}}).filter(e=>e):[],p=e=>{let n=new Map(s.p09.map((e,n)=>[(0,d.$D)(e),n]));return e.sort((e,t)=>e.closed&&t.closed?n.get(e.chainId)===n.get(t.chainId)?l().compareTo(t.positionId,e.positionId):n.get(e.chainId)-n.get(t.chainId):e.closed||t.closed?e.closed?1:-1:e.inRange&&!t.inRange?-1:!e.inRange&&t.inRange?1:n.get(e.chainId)===n.get(t.chainId)?l().compareTo(t.positionId,e.positionId):n.get(e.chainId)-n.get(t.chainId))}},48803:function(e,n,t){t.d(n,{$6:function(){return i.$6},A5:function(){return o.A},GZ:function(){return i.GZ},HV:function(){return i.HV},Pu:function(){return i.Pu},UA:function(){return i.UA},Vs:function(){return i.Vs},Yt:function(){return i.Yt},Zo:function(){return i.Zo},_M:function(){return i._M},a5:function(){return i.a5},b:function(){return o.b},b$:function(){return i.b$},bp:function(){return i.bp},cH:function(){return i.cH},eX:function(){return i.eX},ep:function(){return i.ep},fo:function(){return i.fo},ir:function(){return i.ir},rp:function(){return i.rp},wk:function(){return i.wk},xi:function(){return i.xi},ye:function(){return i.ye},zY:function(){return i.zY}});var o=t(41378),i=t(62883)},62883:function(e,n,t){t.d(n,{$6:function(){return D},GZ:function(){return W},HV:function(){return x},Jh:function(){return U},Pu:function(){return $},UA:function(){return F},Vs:function(){return z},Yt:function(){return C},Zo:function(){return J},_M:function(){return Y},a5:function(){return q},b$:function(){return O},bp:function(){return M},cH:function(){return X},eX:function(){return E},ep:function(){return Z},fo:function(){return K},ir:function(){return L},rp:function(){return S},wk:function(){return H},xi:function(){return V},ye:function(){return N},zY:function(){return R}});var o=t(79570),i=t(12948),r=t(59426),u=t(89011),c=t(3821),a=t(64252),l=t(17625),d=t(69987),s=t(28388),m=t(21406),p=t(9485),f=t(14122),g=t(5112),v=t(34244),k=t.n(v),I=t(44850),w=t.n(I),A=t(45775),T=t(15229),h=t(84401),y=t(20973),P=t(76793);function b(e,n,t,o,i,r){let u=n===e.token0.address,c=s.viem.getCurrencyAmount(e.token0,w().round(u?t:o,e.token0.decimals,w().RoundingModes.DOWN)).quotient,a=s.viem.getCurrencyAmount(e.token1,w().round(u?o:t,e.token1.decimals,w().RoundingModes.DOWN)).quotient;return p.Position.fromAmounts({pool:e,tickLower:i,tickUpper:r,amount0:c,amount1:a,useFullPrecision:!1})}function C(e,n,t,o){let{tokenAAddress:i,tokenAAmount:r,tokenBAmount:u,tickLower:a,tickUpper:l,slippage:d,deadline:m,walletAddress:p,useNative:f,chainId:g}=n,v=b(t,i,r,u,a,l),k={slippageTolerance:(0,c.J)(Number(d)),deadline:Math.floor(Date.now()/1e3+60*Number(m)),recipient:p,useNative:f?s.viem.getNativeCurrency(g):void 0};return s.viem.getCreatePositionTx(v,k,g,e,o)}async function x(e,n,t,o,i,r,u,c,a,l,d,m,p,f,v,I,A){let T=await s.viem.getPool(t.address,o.address,u,n,e,v),h=t.address===T.token0.address,y=w().multiply(h?i:r,new(k())(10).pow(T.token0.decimals)),P=w().multiply(h?r:i,new(k())(10).pow(T.token1.decimals)),b=g.CurrencyAmount.fromRawAmount((h?t:o).native?s.viem.getNativeCurrency(n):T.token0,y),C=g.CurrencyAmount.fromRawAmount((h?o:t).native?s.viem.getNativeCurrency(n):T.token1,P);return s.viem.getMintOptimalV3Tx(n,e,b,C,u,c,a,l,BigInt(Math.floor(Date.now()/1e3)+60*Number(d)),m,v,p,f,I,A)}async function D(e,n,t,o,i,r,u,a,l,d){let m=b(o,t.tokenA.address,t.tokenA.amount,t.tokenB.amount,t.tickLower,t.tickUpper),f={pool:m.pool,tickLower:m.tickLower,tickUpper:m.tickUpper,amount0:s.viem.getCurrencyAmount(o.token0,w().round(u[0],o.token0.decimals,w().RoundingModes.DOWN)).quotient,amount1:s.viem.getCurrencyAmount(o.token1,w().round(u[1],o.token1.decimals,w().RoundingModes.DOWN)).quotient,useFullPrecision:!1},g=p.Position.fromAmounts(f).liquidity,v={slippageTolerance:(0,c.J)(i),deadline:Math.floor(Date.now()/1e3+60*r),tokenId:t.positionId,useNative:d?s.viem.getNativeCurrency(n):void 0};return s.viem.getAddLiquidityTx(v,n,e,a,l,g.toString(),m)}async function R(e,n,t,o,i,r,u,c,a){let{position:l}=await s.viem.PositionDetails.fromPositionId(t,n,BigInt(o),c),d={tokenId:o,liquidityPercentage:i,slippageTolerance:r,deadline:Math.floor(Date.now()/1e3+(0===u?30:u)*60)};return s.viem.getRemoveLiquidityTx(d,e,t,n,c,a,l)}function N(e,n,t,o,i){if(e===i.token0.address)return p.Position.fromAmount0({pool:i,tickLower:t,tickUpper:o,amount0:s.viem.getCurrencyAmount(i.token0,w().round(n,i.token0.decimals,w().RoundingModes.DOWN)).quotient,useFullPrecision:!1}).amount1;if(e===i.token1.address)return p.Position.fromAmount1({pool:i,tickLower:t,tickUpper:o,amount1:s.viem.getCurrencyAmount(i.token1,w().round(n,i.token1.decimals,w().RoundingModes.DOWN)).quotient}).amount0;throw Error("Token address not in pool")}function E(e,n,t,o,i){let r=i?(0,s.parsePrice)(e,n,t):(0,s.parsePrice)(n,e,t);return(0,s.priceToClosestUsableTick)(r,void 0,o)}async function S(e,n,t,o,i,r,u,a){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0n,d=arguments.length>9?arguments[9]:void 0,{position:m}=await s.viem.PositionDetails.fromPositionId(n.chainId,e,BigInt(n.positionId),d);return s.viem.getRebalanceTx(n.chainId,e,t,BigInt(n.positionId),o.tickLower,o.tickUpper,(0,c.J)(i.slippage),BigInt((0,h.OK)(0===Number(i.deadline)||""===i.deadline?30:Number(i.deadline))),d,u,a,l,m,r)}async function O(e,n,t){let o=new s.AutomanClient((0,r.Yw)()),i={chainId:n,amm:e,tokenId:t,clientType:s.ClientTypeEnum.enum.FRONTEND};return o.checkPositionApproval(i)}async function L(e,n,t,o){let i=new s.AutomanClient((0,r.Yw)()),u={chainId:n,amm:e,tokenId:t,permitInfo:o,clientType:s.ClientTypeEnum.enum.FRONTEND};return i.updatePositionPermit(u)}async function U(e,n,t,o){let{hasAuthority:i}=await s.viem.checkPositionApprovalStatus(BigInt(t),void 0,n,e,o);return i}function B(e,n,t,o){if(n){let i=n.action,{tickLower:r,tickUpper:u}=(0,s.normalizeTicks)(i,e.pool);t=r,o=u}try{let n=s.viem.getRebalancedPosition(e,t,o);return{token0Amount:n.amount0.toExact(),token1Amount:n.amount1.toExact()}}catch(e){return(0,s.getLogger)().error("Failed to getRebalanceEst: ".concat(JSON.stringify(e))),{token0Amount:"",token1Amount:""}}}function F(e,n,t,o,i,r,u,c){let a=null==u?void 0:u.type,l=c?(0,P.s2)(c):void 0;if(!c&&!a||"Time"===a||"Time"===l){let e=B(t,c,o,i),n=(0,y.zu)(e.token0Amount,e.token1Amount,r[0],r[1]);return[{amount:e.token0Amount,percent:n.token0Percent},{amount:e.token1Amount,percent:n.token1Percent}]}let d=c?c.condition:(0,P.$W)(u,n.tokenA,n.tokenB,n.tickLower,n.tickUpper,e),m=d.lte||d.gte||"0",p=new(k())(m),f="0"===m?B(t,c,o,i):function(e,n,t,o,i){if(n){let i=n.action,{tickLower:r,tickUpper:u}=(0,s.normalizeTicks)(i,e.pool);t=r,o=u}let r=s.viem.projectRebalancedPositionAtPrice(e,i,t,o);return{token0Amount:r.amount0.toExact(),token1Amount:r.amount1.toExact()}}(t,c,o,i,p),g=(0,y.zu)(f.token0Amount,f.token1Amount,"0"===m?r[0]:w().multiply(p.toString(),Math.pow(10,t.pool.token0.decimals)),"0"===m?r[1]:w().multiply("1",Math.pow(10,t.pool.token1.decimals)));return[{amount:f.token0Amount,percent:g.token0Percent},{amount:f.token1Amount,percent:g.token1Percent}]}let Z=(e,n,t)=>{let o=e.toLowerCase();return""===o?n:n.filter(e=>{var n,i;return"auto-compound on auto compound on".includes(o)&&e.autoCompound||"in range".includes(o)&&e.inRange||"out of range".includes(o)&&!e.inRange||"at staked".includes(o)&&t.includes(e.positionIdBN)||(null===(n=e.tokenA.ticker)||void 0===n?void 0:n.toLowerCase().includes(o))||(null===(i=e.tokenB.ticker)||void 0===i?void 0:i.toLowerCase().includes(o))||(e.feeTier/d.m3W+"%").startsWith(o)||e.positionId.includes(o)})},M=(e,n,t,o)=>t&&o?w().add(w().multiply(e,t),w().multiply(n,o)):"-",V=e=>"".concat(e.positionId,"-").concat(e.chainId),_=(e,n,t)=>e===m.E_Solver.OneInch?{name:"1inch",Icon:(0,o.jsx)(f.T1f,{src:"https://assets.coingecko.com/coins/images/13469/thumb/1inch-token.png?1608803028",alt:"1inch Icon"})}:e===m.E_Solver.OKX?{name:"OKX",Icon:(0,o.jsx)(l.kz,{})}:({UNISWAP_V3:{name:"UNI V3",Icon:(0,o.jsx)(d.blf.Uniswap.Icon,{})},PANCAKESWAP_V3:{name:"PCS V3",Icon:(0,o.jsx)(d.blf.PancakeSwap.Icon,{})},SLIPSTREAM:t===s.ApertureSupportedChainId.BASE_MAINNET_CHAIN_ID?{name:"Aerodrome",Icon:(0,o.jsx)(d.blf.Aerodrome.Icon,{})}:{name:"Velodrome",Icon:(0,o.jsx)(d.blf.Velodrome.Icon,{})}})[n],q=(e,n,t,i)=>{let r=t["".concat(s.viem.getNativeCurrency(n).wrapped.address,"-true")];return i.map(i=>{var u,c;let a=null==t?void 0:t["".concat(i.swapPath.tokenIn,"-",!1)],l=null==t?void 0:t["".concat(i.swapPath.tokenOut,"-",!1)],d=null!==(c=null===(u=i.swapRoute)||void 0===u?void 0:u.map(e=>({tokenDetails:e.map(e=>{var n;let i=[],r=e.map(e=>(i.push(e.toTokenAddress),{title:e.name,percentage:e.part.toString()}));return{token:null!==(n=null==t?void 0:t["".concat((0,A.K)(i[0]),"-false")])&&void 0!==n?n:{ticker:"Unknown",Icon:(0,o.jsx)(f.T1f,{alt:"Unknown"})},details:r}})})))&&void 0!==c?c:[],s={solver:i.solver,..._(i.solver,e,n)};return{priceImpact:w().multiply(i.priceImpact,100),finalAmount0:i.amount0,finalAmount1:i.amount1,api:s,fromToken:{ticker:a.ticker,Icon:a.Icon},swapData:[{to:{ticker:l.ticker,Icon:l.Icon},amountIn:(0,T.b)(BigInt(i.swapPath.amountIn),a.decimals),amountOut:(0,T.b)(BigInt(i.swapPath.amountOut),l.decimals),minAmountOut:(0,T.b)(BigInt(i.swapPath.minAmountOut),l.decimals)}],swapDataHex:i.swapData,swapRoutes:d,liquidity:i.liquidity,feeBips:i.feeBips,feeUSD:i.feeUSD,gasFeeUSD:i.gasFeeEstimation?w().multiply(r.price,(0,T.b)(i.gasFeeEstimation,r.decimals)):"-",token0FeeAmount:i.token0FeeAmount,token1FeeAmount:i.token1FeeAmount}})},W=async(e,n,t,o,i,r,u,c,a,l,d)=>{try{let m=await s.viem.getRebalanceSwapInfo(n,e,t,o,i,r,u,c,l,d);return q(e,n,a,m)}catch(n){throw(0,s.getLogger)().error("Failed to get RebalanceSwapInfo: ",{error:JSON.stringify(n),tokenPrices:c,amm:e,positionId:o.toString()}),n}},z="Insufficient pool token, change token amount to retry.",Y=(e,n,t,o)=>o?"Unstake position to view swap info.":!e&&n&&n.toString().includes("Price slippage check")?"Insufficient slippage to use zap in.":e&&0!==e.length?void 0:1>w().compareTo(t,"0.01")?"Amount to be zapped-in is too small.":z;function j(e,n,t,o,i,r,u){let a=s.viem.getNativeCurrency(e),l=s.viem.getCurrencyAmount(u&&t.token0.address===a.wrapped.address?a:t.token0,w().round(r[0],t.token0.decimals,w().RoundingModes.DOWN)),d=s.viem.getCurrencyAmount(u&&t.token1.address===a.wrapped.address?a:t.token1,w().round(r[1],t.token1.decimals,w().RoundingModes.DOWN)),m={slippageTolerance:(0,c.J)(o),deadline:i,tokenId:n,useNative:u?a:void 0};return{amount0:l,amount1:d,increaseLiquidityOptions:m}}async function H(e,n,t,o,i,r,u,c,a,l,d){try{var m,p;let{amount0:f,amount1:g,increaseLiquidityOptions:v}=j(n,o,i,r,Math.floor(Date.now()/1e3+60*u),c,!1),k=null==a?void 0:null===(m=a["".concat(i.token0.address,"-false")])||void 0===m?void 0:m.price,I=null==a?void 0:null===(p=a["".concat(i.token1.address,"-false")])||void 0===p?void 0:p.price,w=await s.viem.getIncreaseLiquidityOptimalSwapInfoV3(v,n,e,f,g,t,[k,I],l,d).catch(a=>{throw(0,s.getLogger)().error("AddLPV2.getIncreaseLiquidityOptimalSwapInfoV3Failed: ",{amm:e,networkId:n,walletAddress:t,positionId:o,pool:i,slippage:r,deadline:u,amounts:c,error:JSON.stringify(a)}),a});return q(e,n,a,w)}catch(a){throw(0,s.getLogger)().error("AddLP.getIncreaseLiquidityOptimalSwapInfoFailed: ",{amm:e,networkId:n,walletAddress:t,positionId:o,pool:i,slippage:r,deadline:u,amounts:c,error:JSON.stringify(a)}),a}}async function J(e,n,t,o,i,r,u,c,a,l,d,m,p,f){let{amount0:g,amount1:v,increaseLiquidityOptions:k}=j(n,o,i,r,Math.floor(Date.now()/1e3+60*u),c,f);return s.viem.getIncreaseLiquidityOptimalV3Tx(k,n,e,g,v,t,d,a,l,void 0,m,p)}let $=(e,n)=>{var t;let o=["Rebalance","Reinvest"],i=null==n?void 0:null===(t=n.activityLogs)||void 0===t?void 0:t.reduce((e,t,i)=>{let r=i<n.activityLogs.length-1?n.activityLogs[i+1]:void 0;return"Deposit"===t.type&&o.includes(null==r?void 0:r.type)||e.push(t),e},[]),r={...{...n,activityLogs:i},tokens:[{ticker:e.tokenA.ticker,decimals:e.tokenA.decimals},{ticker:e.tokenB.ticker,decimals:e.tokenB.decimals}],unit:" USD"};return r},K=(e,n,t,o,r,c)=>{let l=[{ticker:e.tokenA.ticker,Icon:e.tokenA.Icon},{ticker:e.tokenB.ticker,Icon:e.tokenB.Icon}],d=e.chainId===r,m=(0,u.pp)(r),{token0:f,token1:g}=(0,y.UZ)(e.tokenA,e.tokenB,e.chainId),v=null==t?void 0:t.map(t=>{var r,u,v;let k=s.viem.getNativeCurrency(e.chainId),I=(0,i.Q)(t,null!=n?n:e,k.decimals,null==o?void 0:null===(r=o[k.wrapped.address])||void 0===r?void 0:r.price,null==o?void 0:null===(u=o[e.tokenA.address])||void 0===u?void 0:u.price,null==o?void 0:null===(v=o[e.tokenB.address])||void 0===v?void 0:v.price),w=(0,p.tickToPrice)(f,g,t.tickLower).toFixed(18),A=(0,p.tickToPrice)(f,g,t.tickUpper).toFixed(18),T=t.tokenId.toString(),h=T===e.positionId,y=!I.closedTimestamp;return{tokens:l,isCurrentChain:d,supportedChainId:m,positionId:T,closedTimestamp:I.closedTimestamp,closedLiquidityUSD:I.closedLiquidityUSD,closedAccruedFeesUSD:I.closedAccruedFeesUSD,closedPriceRange:(0,a._)(w,A),closedMarketPrice:I.closedMarketPrice,closedTotalAPR:I.totalAPR,closedFeeAPR:I.feeAPR,onClick:c&&y&&!h?()=>c("".concat(e.chainId,"-").concat(T)):void 0}}).reverse();return{tokens:l,supportedChainId:m,isCurrentChain:d,list:null!=v?v:[]}},X=(e,n)=>{var t,o;let{tokenA:i,tokenB:r,liquidity:u,feeAmount:c}=e;return{tokens:[i,r],liquidityInUSD:u,collectableInUSD:c,tokenPrices:[(null==n?void 0:null===(t=n[i.address])||void 0===t?void 0:t.price)||"0",(null==n?void 0:null===(o=n[r.address])||void 0===o?void 0:o.price)||"0"]}}},20973:function(e,n,t){t.d(n,{cu:function(){return p},yv:function(){return d},zu:function(){return m},UZ:function(){return l},NO:function(){return s},on:function(){return a}});var o=t(28388),i=t(5112),r=t(44850),u=t.n(r),c=t(15229);function a(e){return{name:e.name,ticker:e.symbol,decimals:e.decimals,address:e.address,native:e.isNative}}function l(e,n,t){return e.address.toLowerCase()<=n.address.toLowerCase()?{token0:new i.Token(t,e.address,e.decimals),token1:new i.Token(t,n.address,n.decimals)}:{token0:new i.Token(t,n.address,n.decimals),token1:new i.Token(t,e.address,e.decimals)}}function d(e,n,t){let i=o.viem.getNativeCurrency(n);return t&&e===i.wrapped.symbol?i.symbol:e}function s(e,n){let t=o.viem.getNativeCurrency(n);return e===t.wrapped.address}function m(e,n,t,o){let i=u().add(u().multiply(e,t),u().multiply(n,o));if(0===u().compareTo(i,0))return{token0Percent:"-",token1Percent:"-"};{let r=u().multiply(e,t),c=0===u().compareTo(r,0)?"0":u().multiply(u().divide(r,i,2),100),a=u().multiply(n,o),l=0===u().compareTo(a,0)?"0":u().multiply(u().divide(a,i,2),100);return{token0Percent:c,token1Percent:l}}}let p=e=>parseFloat((0,c.b)(null!=e?e:0n,6))},76793:function(e,n,t){t.d(n,{$W:function(){return C},$y:function(){return w},ZW:function(){return A},cr:function(){return P},dq:function(){return T},gC:function(){return y},h1:function(){return b},ht:function(){return i},nZ:function(){return h},s2:function(){return I},sm:function(){return k}});var o,i,r=t(20973),u=t(59426),c=t(28388),a=t(34244),l=t.n(a),d=t(44850),s=t.n(d),m=t(19034),p=t.n(m),f=t(15229),g=t(68123),v=t(48803);(o=i||(i={})).CREATED="CREATED",o.STARTED="STARTED",o.COMPLETED="COMPLETED",o.INVALID="INVALID",o.DELETED="DELETED";let k=async(e,n,t,o)=>{let i=new c.AutomanClient((0,u.Yw)()),r={ownerAddr:n,chainId:t,amm:e,isLimitOrder:o,clientType:c.ClientTypeEnum.enum.FRONTEND};return i.listTrigger(r)},I=e=>{if("Time"===e.condition.type)return"Time";{var n,t;let o=null===(n=e.condition)||void 0===n?void 0:n.frontendType,i=null===(t=e.condition)||void 0===t?void 0:t.singleToken;return"RELATIVE_PRICE"===o&&void 0===i||void 0===o&&void 0!==i?"Price":"Ratio"}};async function w(e,n,t){let o=new c.AutomanClient((0,u.Yw)()),i={payloadSignature:n,payload:{...e,clientType:c.ClientTypeEnum.enum.FRONTEND},permitInfo:t};return o.createTrigger(i)}async function A(e,n){let t=new c.AutomanClient((0,u.Yw)()),o={payload:{...e,clientType:c.ClientTypeEnum.enum.FRONTEND},payloadSignature:n};return t.deleteTrigger(o)}async function T(e,n){let t=new c.AutomanClient((0,u.Yw)()),o={payload:{...e,clientType:c.ClientTypeEnum.enum.FRONTEND},payloadSignature:n};return t.updateTrigger(o)}function h(e,n,t){return(null==e?void 0:e.triggers)?(Array.isArray(n)||(n=[n]),e.triggers.filter(e=>n.includes(e.action.type)&&e.status!==i.DELETED&&(!t||e.nftId===t))):[]}let y=async(e,n,t,o,a)=>{let l=(0,u._G)(n),d=[],m=[];for(let t of e){let e=t.limitOrderInfo.inputTokenAmountAtCreation.address,o=t.limitOrderInfo.outputTokenAmountAtClosure.address;l.get(e)||m.includes(e)?l.get(o)||m.includes(o)||(d.push(c.viem.getToken(o,n,a,void 0,!0)),m.push(o)):(d.push(c.viem.getToken(e,n,a,void 0,!0)),m.push(e))}m.length>0&&(o(n,await Promise.all(d)),l=(0,u._G)(n));let p=e.map(async e=>{var o,u;let d=await c.viem.getPosition(n,t,BigInt(e.nftId),a),m=l.get(e.limitOrderInfo.inputTokenAmountAtCreation.address),p=l.get(e.limitOrderInfo.outputTokenAmountAtClosure.address),k=(0,f.b)(BigInt(e.limitOrderInfo.inputTokenAmountAtCreation.rawAmount),m.decimals),I=(0,f.b)(BigInt(e.limitOrderInfo.outputTokenAmountAtClosure.rawAmount),p.decimals),w=m.address===d.pool.token0.address,A=!0;if(e.status===i.CREATED||e.status===i.STARTED)try{A=!!await (0,v.b$)(t,n,e.nftId)}catch(n){console.log("Failed to checkPositionPermission on position",e.nftId,n)}return{orderId:e.taskId,nftId:e.nftId,chainId:n,tokenSell:(0,r.on)(m),tokenBuy:(0,r.on)(p),sellAmount:k,buyAmount:I,buyRatio:"0"===k?"0":s().divide(I,k,10),feeTier:e.limitOrderInfo.feeTier,amountMinimum:w?d.token0PriceLower.toFixed(18):d.token0PriceUpper.invert().toFixed(18),amountMaximum:w?d.token0PriceUpper.toFixed(18):d.token0PriceLower.invert().toFixed(18),status:(0,g.S)(e.status,A),timestamp:e.expiration,feeRevenue:{earnedFeeInputToken:null===(o=e.limitOrderInfo)||void 0===o?void 0:o.earnedFeeInputToken,earnedFeeOutputToken:null===(u=e.limitOrderInfo)||void 0===u?void 0:u.earnedFeeOutputToken},notification:null==e?void 0:e.lastFailedMessage}});return Promise.all(p)};function P(e){var n,t;return null!==(t=null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==t?t:e}let b=(e,n,t)=>{if(null!=e&&e.triggers.length){let o=p()().valueOf(),i=h(e,n).filter(e=>e.nftId===t),r=i.findIndex(e=>p()(1e3*e.expiration).valueOf()<o);return 0===i.length?void 0:-1===r}},C=(e,n,t,o,i,u)=>{switch(e.type){case"Time":return{type:"Time",timeAfterEpochSec:p()(e.Time.dateTime).unix()};case"Ratio":return{...c.viem.generatePriceConditionFromTokenValueProportion(o,i,e.Ratio.token.address===n.address?"Above"===e.Ratio.aboveOrBelow:"Below"===e.Ratio.aboveOrBelow,e.Ratio.token.address===n.address?e.Ratio.percentage:1-e.Ratio.percentage),frontendType:"POSITION_VALUE_RATIO",durationSec:e.Ratio.timeBufferChecked&&e.Ratio.timeBuffer?parseFloat(s().multiply(e.Ratio.timeBuffer,3600)):void 0};default:{let{token0:o,token1:i}=(0,r.UZ)(n,t,u),a=new(l())(0),d=new(l())(0);if(0!==s().compareTo(e.Price.amount,0)){let t=(0,c.parsePrice)(e.Price.token.address===n.address?o:i,e.Price.token.address===n.address?i:o,s().multiply(e.Price.amount,"1.0"));a=new(l())(s().divide(t.numerator.toString(),t.denominator.toString(),18)),d=new(l())(s().divide(t.invert().numerator.toString(),t.invert().denominator.toString(),18))}let m="Above"===e.Price.aboveOrBelow&&e.Price.token.ticker===t.ticker||"Below"===e.Price.aboveOrBelow&&e.Price.token.ticker===n.ticker;return{type:"Price",frontendType:"RELATIVE_PRICE",[m?"lte":"gte"]:(e.Price.token.ticker===n.ticker?a:d).toString(),durationSec:e.Price.timeBufferChecked&&e.Price.timeBuffer?parseFloat(s().multiply(e.Price.timeBuffer,3600)):void 0}}}}},12948:function(e,n,t){t.d(n,{Q:function(){return s}});var o=t(60152),i=t(52093),r=t(34244),u=t.n(r),c=t(44850),a=t.n(c),l=t(89458);function d(e,n){return a().divide(e,new(u())(10).pow(n),n)}function s(e,n,t){var r,u,c,s,m;let p,f,g,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"3000",k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"1",I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"1",w=Date.now()/1e3,A=null!==e.closedTimestamp,T=A?Number(e.closedTimestamp):w;k=A?null===(r=e.closedToken0USDPrice)||void 0===r?void 0:r.toString():k,I=A?null===(u=e.closedToken1USDPrice)||void 0===u?void 0:u.toString():I,v=A?null===(c=e.closedNativeUSDPrice)||void 0===c?void 0:c.toString():v;let h=e.activityLogs.map((e,t)=>(function(e,n,t){let[i,r,u,c,a,l]=n.split(",");return{id:t,type:i,timestamp:Number(r),token0Amount:u,token1Amount:c,valueUSD:Number(l),txHash:a,explorerURL:"".concat((0,o.DI)(e),"/tx/").concat(a)}})(n.chainId,e,t)),y=function(e,n){let t=e.filter(e=>"Deposit"===e.type||"Withdraw"===e.type);if(0===t.length)return 0;let o=t.reduce((e,t)=>{let o="Deposit"===t.type?t.valueUSD:-t.valueUSD,i=n-t.timestamp;return e+o*i},0),i=n-t[0].timestamp;return i>0?o/i:0}(h,T),{totalFees:P,divergenceLoss:b,gasCostUSD:C,currentLiquidityUSD:x}=function(e,n,t,o,i,r){let u=null!==e.closedTimestamp,c=a().add(a().multiply(a().add(d(e.collectedToken0Amount,n.tokenA.decimals),u?0:n.tokenA.collectableAmount),t),a().multiply(a().add(d(e.collectedToken1Amount,n.tokenB.decimals),u?0:n.tokenB.collectableAmount),o)),l=d(e.investedToken0Amount-e.withdrawnToken0Amount,n.tokenA.decimals),s=d(e.investedToken1Amount-e.withdrawnToken1Amount,n.tokenB.decimals),m=a().add(a().multiply(a().subtract(u?0:n.tokenA.amount,l),t),a().multiply(a().subtract(u?0:n.tokenB.amount,s),o)),p=a().multiply(d(e.gasCost,i),r),f=u?"0":a().add(a().multiply(a().add(n.tokenA.amount,n.tokenA.collectableAmount),t),a().multiply(a().add(n.tokenB.amount,n.tokenB.collectableAmount),o));return{totalFees:c,divergenceLoss:m,gasCostUSD:p,currentLiquidityUSD:f}}(e,n,k,I,t,v),D=a().subtract(a().add(P,b),C),R=()=>(function(e,n,t,o,i){let r=o.filter(e=>"Deposit"===e.type||"Withdraw"===e.type||"CollectFees"===e.type).map(e=>({amount:e.valueUSD*("Deposit"===e.type?-1:1),date:new Date(1e3*e.timestamp)}));r.push({amount:-Number(t),date:new Date(1e3*i)}),r.push({amount:Number(n),date:new Date(1e3*i)});let u=(0,l.xirr)(r);return(((u.rate+1)**(365/u.days)-1)*100).toString()})(n.positionId,x,C,h,T),{totalAPR:N,feeAPR:E}=function(e,n,t,o,i){let r=Math.ceil((i-o)/86400);return 0===t||0===r?{totalAPR:"0",feeAPR:"0"}:{totalAPR:a().divide(a().multiply(a().divide(e,t,6),36500),r,4),feeAPR:a().divide(a().multiply(a().divide(n,t,6),36500),r,4)}}(D,P,y,Number(e.createdTimestamp),Number(T));if(A){let t=h.findLast(e=>"Withdraw"===e.type);p=null==t?void 0:t.valueUSD,g=(0,i.w$)(e.closedMarketPrice.toString(),n.tokenA.decimals,n.tokenB.decimals),f=a().add(a().multiply(d(e.collectedToken0Amount,n.tokenA.decimals),k),a().multiply(d(e.collectedToken1Amount,n.tokenB.decimals),I))}return{positionId:e.id,timeAPR:"-1",getMoneyAPR:R,totalAPR:N,feeAPR:E,pnl:D,divergenceLoss:b,totalFees:P,avgLiquidityUSD:y.toString(),gasCost:C,activityLogs:h.filter(e=>"Transfer"!==e.type),headPositionId:null===(s=e.headPosition)||void 0===s?void 0:s.id,rebalancePositions:null===(m=e.headPosition)||void 0===m?void 0:m.rebalancePositions,closedTimestamp:A?Number(e.closedTimestamp):void 0,closedLiquidityUSD:null==p?void 0:p.toString(),closedAccruedFeesUSD:f,closedMarketPrice:g}}},3821:function(e,n,t){t.d(n,{J:function(){return i}});var o=t(5112);function i(e){return new o.Percent(Math.floor(1e4*e),1e4)}},95220:function(e,n,t){t.d(n,{n:function(){return o}});function o(e){let n=new Date(1e3*e),t=n.toLocaleTimeString("en-US",{month:"short",year:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"numeric",hour12:!0}).split(", ");return"".concat(t[2],", ").concat(t[0],", ").concat(t[1])}},64252:function(e,n,t){t.d(n,{C:function(){return p},_:function(){return m}});var o=t(76793),i=t(89011),r=t(61029),u=t(95220),c=t(69987),a=t(44850),l=t.n(a),d=t(65195),s=t.n(d);function m(e,n){return{min:l().compareTo(e,0)>0&&0===l().compareTo(l().divide(1,e,18),0)?"∞":(0,r.T4)(e),max:l().compareTo(n,0)>0&&0===l().compareTo(l().divide(1,n,18),0)?"∞":(0,r.T4)(n),swapMin:l().compareTo(n,0)>0?(0,r.T4)(l().divide(1,n,18)):"∞",swapMax:l().compareTo(e,0)>0?(0,r.T4)(l().divide(1,e,18)):"∞"}}function p(e,n,t,r){var a,l;let{isSelected:d,atStake:p,triggerObj:f,closedPositionResult:g,showRadio:v,limitOrder:k,position:{positionId:I,chainId:w,tokenA:A,tokenB:T,feeTier:h,liquidity:y,feeAmount:P,tokenPercentages:b,minPrice:C,maxPrice:x,inRange:D,closed:R=!1}}=e,N="".concat(I,"-").concat(w),E=(0,o.nZ)(f,"Reinvest",I).length>0,S=(0,o.h1)(f,"Rebalance",I),O=(0,o.h1)(f,"Close",I),L=R?s().isEqual(g,{})||!g?void 0:{dateTime:(0,u.n)(g.timestamp),exitedValueUsd:g.exitedValueUsd,exitedCollectedIncomeUsd:g.exitedCollectedIncomeUsd}:void 0,U=(0,o.h1)(f,["RecurringPrice","RecurringPercentage","RecurringRatio","RecurringDualAction"],I),B=m(C,x),F={id:"Position-".concat(N),chainId:w.toString(),supportedChainId:(0,i.pp)(w),positionId:I,tokens:[A,T],feeTier:h,liquidity:y,fees:P,tokenPercentages:[b.token0Percent,b.token1Percent],priceRange:B,autoCompound:E,rebalanced:S,recurringRebalanced:U,prescheduledPosition:O,inRange:D,limitOrder:k,isCurrentChain:n===w,isManta:(0,i.pp)(n)===c.HLD.MANTA,closed:R,closedInfo:L,selected:d,atStake:p,checked:v?d:void 0},Z={...F,totalAPR:null!==(a=null==t?void 0:t.totalAPR)&&void 0!==a?a:"",feeAPR:null!==(l=null==t?void 0:t.feeAPR)&&void 0!==l?l:"",positionHistory:null==t?void 0:t.rebalancePositions.map(e=>({positionId:e.id,isActive:!e.closedTimestamp})).sort((e,n)=>Number(n.positionId)-Number(e.positionId))};return r?Z:F}},80631:function(e,n,t){t.d(n,{AX:function(){return q},Dx:function(){return R},OA:function(){return V},Rw:function(){return M},W2:function(){return E},WA:function(){return _},Wh:function(){return Z},X2:function(){return S},_r:function(){return B},_z:function(){return L},aN:function(){return Y},c5:function(){return z},c_:function(){return W},cs:function(){return U},eN:function(){return N},mK:function(){return O},rl:function(){return F},s0:function(){return D}});var o=t(92228),i=t(17625),r=t(69987),u=t(58694),c=t(78545);function a(){let e=(0,o.Z)(['\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-family: "Roboto Flex";\n']);return a=function(){return e},e}function l(){let e=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n"]);return l=function(){return e},e}function d(){let e=(0,o.Z)(['\n  width: 100%;\n  font-weight: 500;\n  font-family: "Dunbar Tall";\n  text-align: start;\n  color: ',";\n"]);return d=function(){return e},e}function s(){let e=(0,o.Z)(["\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n"]);return s=function(){return e},e}function m(){let e=(0,o.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return m=function(){return e},e}function p(){let e=(0,o.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: ",";\n"]);return p=function(){return e},e}function f(){let e=(0,o.Z)(["\n  margin-top: 20px;\n  align-items: center;\n  gap: ",";\n  width: 100%;\n  max-width: calc(100vw * 0.75);\n  padding-bottom: 30px;\n"]);return f=function(){return e},e}function g(){let e=(0,o.Z)(["\n  width: 100%;\n  height: 276px;\n  font-weight: 500;\n  border-radius: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: ",";\n  border: 1px solid ",";\n  color: ",";\n  > svg,\n  path {\n    fill: ",";\n  }\n  ","\n"]);return g=function(){return e},e}function v(){let e=(0,o.Z)(["\n  padding: ",";\n  background: ",";\n  color: ",";\n  border: ",";\n  border-radius: ",";\n  box-sizing: border-box;\n  ","\n"]);return v=function(){return e},e}function k(){let e=(0,o.Z)(["\n  width: 100%;\n"]);return k=function(){return e},e}function I(){let e=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n  color: ",";\n"]);return I=function(){return e},e}function w(){let e=(0,o.Z)(["\n  color: ",";\n"]);return w=function(){return e},e}function A(){let e=(0,o.Z)(["\n  font-size: 16px;\n  line-height: 20px;\n  font-weight: 500;\n  color: ",";\n"]);return A=function(){return e},e}function T(){let e=(0,o.Z)(["\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 16px;\n"]);return T=function(){return e},e}function h(){let e=(0,o.Z)(["\n  width: 160px;\n  align-items: flex-end;\n  justify-content: center;\n  gap: ",";\n  color: ",";\n"]);return h=function(){return e},e}function y(){let e=(0,o.Z)(["\n  height: 1px;\n  width: 100%;\n  background-color: ",";\n  align-self: stretch;\n"]);return y=function(){return e},e}function P(){let e=(0,o.Z)(['\n  ::after {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    content: "";\n    width: 1px;\n    height: 100%;\n    background-color: ',";\n  }\n"]);return P=function(){return e},e}function b(){let e=(0,o.Z)(["\n  text-align: right;\n  color: ",";\n  margin-top: -8px;\n"]);return b=function(){return e},e}function C(){let e=(0,o.Z)(["\n  height: ","px;\n  width: ","px;\n  flex: 1 1 0%;\n  display: flex;\n  align-items: center;\n  gap: ",";\n"]);return C=function(){return e},e}function x(){let e=(0,o.Z)(["\n  height: 80px;\n  width: 80px;\n  animation: rotation infinite 3s linear;\n\n  @keyframes rotation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return x=function(){return e},e}let D=(0,u.ZP)(r.huw).withConfig({componentId:"sc-6102ce51-0"})(a()),R=u.ZP.div.withConfig({componentId:"sc-6102ce51-1"})(l()),N=(0,u.ZP)(r.iHY).withConfig({componentId:"sc-6102ce51-2"})(d(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),E=u.ZP.div.withConfig({componentId:"sc-6102ce51-3"})(s(),e=>{let{theme:n}=e;return n.spacing.xl}),S=u.ZP.div.withConfig({componentId:"sc-6102ce51-4"})(m()),O=u.ZP.div.withConfig({componentId:"sc-6102ce51-5"})(p(),e=>{let{gap:n}=e;return n}),L=(0,u.ZP)(r.tuJ).withConfig({componentId:"sc-6102ce51-6"})(f(),e=>{let{theme:n}=e;return n.spacing["3xl"]}),U=u.ZP.div.withConfig({componentId:"sc-6102ce51-7"})(g(),e=>{let{theme:n}=e;return n.radii.md},e=>{let{theme:n}=e;return n.spacing.lg},e=>{let{theme:n}=e;return n.colors.global.line.Line1},e=>{let{theme:n}=e;return n.colors.global.text.T3},e=>{let{theme:n}=e;return n.colors.global.text.T1},(0,c.qC)(c.bK,c.Dh)),B=u.ZP.div.withConfig({componentId:"sc-6102ce51-8"})(v(),e=>{let{padding:n}=e;return n||"0"},e=>{let{theme:n}=e;return n.colors.global.background.BG2},e=>{let{theme:n}=e;return n.colors.global.text.T1},e=>{let{padding:n}=e;return n?"1px solid ".concat(e=>{let{theme:n}=e;return n.colors.global.line.Line2},";"):"none"},e=>{let{theme:n}=e;return n.radii.md},c.bK);(0,u.ZP)(B).withConfig({componentId:"sc-6102ce51-9"})(k());let F=(0,u.ZP)(B).withConfig({componentId:"sc-6102ce51-10"})(I(),e=>{let{theme:n,gap:t}=e;return null!=t?t:n.spacing.md},e=>{let{theme:n}=e;return n.colors.global.text.T1}),Z=(0,u.ZP)(r.Bpc).withConfig({componentId:"sc-6102ce51-11"})(w(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),M=(0,u.ZP)(r.Bpc).withConfig({componentId:"sc-6102ce51-12"})(A(),e=>{let{theme:n}=e;return n.colors.global.text.T1}),V=(0,u.ZP)(M).withConfig({componentId:"sc-6102ce51-13"})(T()),_=(0,u.ZP)(r.tuJ).withConfig({componentId:"sc-6102ce51-14"})(h(),e=>{let{theme:n}=e;return n.spacing.xl},e=>{let{theme:n}=e;return n.colors.global.text.T1}),q=u.ZP.div.withConfig({componentId:"sc-6102ce51-15"})(y(),e=>{let{theme:n}=e;return n.colors.global.line.Line2});u.ZP.div.withConfig({componentId:"sc-6102ce51-16"})(P(),e=>{let{theme:n}=e;return n.colors.global.line.Line2});let W=(0,u.ZP)(r.T59).withConfig({componentId:"sc-6102ce51-17"})(b(),e=>{let{theme:n}=e;return n.colors.global.text.T3}),z=u.ZP.div.withConfig({componentId:"sc-6102ce51-18"})(C(),e=>{let{height:n}=e;return n},e=>{let{width:n}=e;return n},e=>{let{theme:n}=e;return n.spacing.md}),Y=(0,u.ZP)(i.An).withConfig({componentId:"sc-6102ce51-19"})(x())}}]);
//# sourceMappingURL=2089-f7081d3700b5b043.js.map